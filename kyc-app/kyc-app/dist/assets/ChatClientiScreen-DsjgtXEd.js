import{e as v,j as r,a as O}from"./index-CyyftA72.js";import{b as x,u as B}from"./react-vendor-BCFq-EBz.js";import{l as D}from"./index-CG1tBJBN.js";import"./firebase-CZFSqwcK.js";var w;(function(a){a.Error="error",a.Warn="warn",a.Info="info",a.Debug="debug",a.Fatal="fatal",a.Http="http",a.Verbose="verbose",a.Silly="silly",a.Trace="trace"})(w||(w={}));class R{constructor(){this.length=0}push(t){const n={value:t};this.last=this.last?this.last.next=n:this.first=n,this.length++}shift(){if(this.first){const{value:t}=this.first;return this.first=this.first.next,--this.length||(this.last=void 0),t}}}const M=1e3,N=1e3,I=3,P=100,A=a=>JSON.stringify(a).length+1;function F(a=M,t=N,n=I,o=P,l=0,u=A){let p,s,d=[],g=0,f=0,m=0;async function b(){p&&clearTimeout(p),p=null;const i=d,e=g;d=[],g=0;try{await s(i.map(c=>c.log)),i.forEach(c=>c.resolve(c.log)),f=0}catch(c){if(f<n){f++,m=Date.now()+o,d=d.concat(i),g+=e,await h();return}i.map(y=>y.reject(c)),f=0}}async function h(){if(!p)return new Promise(i=>{p=setTimeout(async function(){await b(),i()},t)})}return{initPusher:function(i){return s=i,async function(e){return new Promise(async(c,y)=>(d.push({log:e,resolve:c,reject:y}),l>0&&(g+=u(e)),(d.length>=a||l>0&&g>=l)&&Date.now()>m?await b():await h(),c))}},flush:b}}const C=64;function L(a,t,n="The function"){if(a<=0||t<=0)return g=>g;let o=[0],l=0,u=Date.now();function p(){const g=Date.now(),f=a/C;if(g<u+f)return;const m=Math.floor((g-u)/f);o=Array(Math.min(m,C)).fill(0).concat(o).slice(0,C),u+=m*f}function s(){return o.reduce((g,f)=>g+f)}function d(){o[0]++}return g=>async(...f)=>{if(p(),s()<t)return d(),await g(...f);const m=Date.now();l<m-a&&(l=m,console.error(`${n} was called more than ${t} times during last ${a}ms. Ignoring.`))}}function $(a,t=-1){let n=0;const o=new R;function l(u){return async(...p)=>new Promise((s,d)=>{async function g(){if(n<a){n++;try{s(await u(...p))}catch(f){d(f)}n--,o.length>0&&o.shift()()}else if(t<0||o.length<t)o.push(g);else{d(new Error("Queue max limit exceeded"));return}}return g()})}return l}var k,_;function U(){if(_)return k;_=1;class a extends Error{constructor(d){super(a._prepareSuperMessage(d)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,a)}static _prepareSuperMessage(d){try{return JSON.stringify(d)}catch{return String(d)}}}const t=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],n=Symbol(".toJSON called"),o=s=>{s[n]=!0;const d=s.toJSON();return delete s[n],d},l=({from:s,seen:d,to_:g,forceEnumerable:f,maxDepth:m,depth:b})=>{const h=g||(Array.isArray(s)?[]:{});if(d.push(s),b>=m)return h;if(typeof s.toJSON=="function"&&s[n]!==!0)return o(s);for(const[i,e]of Object.entries(s)){if(typeof Buffer=="function"&&Buffer.isBuffer(e)){h[i]="[object Buffer]";continue}if(typeof e!="function"){if(!e||typeof e!="object"){h[i]=e;continue}if(!d.includes(s[i])){b++,h[i]=l({from:s[i],seen:d.slice(),forceEnumerable:f,maxDepth:m,depth:b});continue}h[i]="[Circular]"}}for(const{property:i,enumerable:e}of t)typeof s[i]=="string"&&Object.defineProperty(h,i,{value:s[i],enumerable:f?!0:e,configurable:!0,writable:!0});return h};return k={serializeError:(s,d={})=>{const{maxDepth:g=Number.POSITIVE_INFINITY}=d;return typeof s=="object"&&s!==null?l({from:s,seen:[],forceEnumerable:!0,maxDepth:g,depth:0}):typeof s=="function"?`[Function: ${s.name||"anonymous"}]`:s},deserializeError:(s,d={})=>{const{maxDepth:g=Number.POSITIVE_INFINITY}=d;if(s instanceof Error)return s;if(typeof s=="object"&&s!==null&&!Array.isArray(s)){const f=new Error;return l({from:s,seen:[],to_:f,maxDepth:g,depth:0}),f}return new a(s)}},k}var z=U();const J={endpoint:"https://in.logs.betterstack.com",batchSize:1e3,batchSizeKiB:0,batchInterval:1e3,retryCount:3,retryBackoff:100,syncMax:5,syncQueuedMax:100,burstProtectionMilliseconds:5e3,burstProtectionMax:1e4,ignoreExceptions:!1,throwExceptions:!1,contextObjectMaxDepth:50,contextObjectMaxDepthWarn:!0,contextObjectCircularRefWarn:!0,sendLogsToConsoleOutput:!1,sendLogsToBetterStack:!0,calculateLogSizeBytes:A};class K{constructor(t,n){if(this._middleware=[],this._countLogged=0,this._countSynced=0,this._countDropped=0,typeof t!="string"||t==="")throw new Error("Logtail source token missing");this._sourceToken=t,this._options=Object.assign(Object.assign({},J),n);const l=$(this._options.syncMax,this._options.syncQueuedMax)(p=>this._sync(p));this._logBurstProtection=L(this._options.burstProtectionMilliseconds,this._options.burstProtectionMax,"Logging"),this.log=this._logBurstProtection(this.log.bind(this));const u=F(this._options.batchSize,this._options.batchInterval,this._options.retryCount,this._options.retryBackoff,this._options.batchSizeKiB*1024,this._options.calculateLogSizeBytes);this._batch=u.initPusher(p=>l(p)),this._flush=u.flush}async flush(){return this._flush()}get logged(){return this._countLogged}get synced(){return this._countSynced}get dropped(){return this._countDropped}async log(t,n=w.Info,o={}){if(typeof o!="object"&&(o={extra:o}),o instanceof Error&&(o={error:o}),this._options.sendLogsToConsoleOutput)switch(n){case"debug":console.debug(t,o);break;case"info":console.info(t,o);break;case"warn":console.warn(t,o);break;case"error":console.error(t,o);break;default:console.log(`[${n.toUpperCase()}]`,t,o);break}if(typeof this._sync!="function")throw new Error("No Logtail logger sync function provided");this._countLogged++;let u=Object.assign(Object.assign({dt:new Date,level:n},o),t instanceof Error?z.serializeError(t):{message:t});for(const p of this._middleware){let s=await p(u);if(s==null)return u;u=s}if(u=this.serialize(u,this._options.contextObjectMaxDepth),!this._options.sendLogsToBetterStack)return u;try{await this._batch(u),this._countSynced++}catch(p){if(this._countDropped++,!this._options.ignoreExceptions){if(this._options.throwExceptions)throw p;console.error(p)}}return u}serialize(t,n,o=new WeakSet){if(t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t;if(t instanceof Date)return isNaN(t.getTime())?t.toString():t.toISOString();if(t instanceof Error)return z.serializeError(t);if((typeof t=="object"||Array.isArray(t))&&(n<1||o.has(t)))return o.has(t)?(this._options.contextObjectCircularRefWarn&&console.warn("[Logtail] Found a circular reference when serializing logs. Please do not use circular references in your logs."),"<omitted circular reference>"):(this._options.contextObjectMaxDepthWarn&&console.warn(`[Logtail] Max depth of ${this._options.contextObjectMaxDepth} reached when serializing logs. Please do not use excessive object depth in your logs.`),`<omitted context beyond configured max depth: ${this._options.contextObjectMaxDepth}>`);if(Array.isArray(t)){o.add(t);const l=t.map(u=>this.serialize(u,n-1,o));return o.delete(t),l}else if(typeof t=="object"){const l={};return o.add(t),Object.entries(t).forEach(u=>{const p=u[0],s=u[1],d=this.serialize(s,n-1,o);d!==void 0&&(l[p]=d)}),o.delete(t),l}else return typeof t>"u"?void 0:`<omitted unserializable ${typeof t}>`}async debug(t,n={}){return this.log(t,w.Debug,n)}async info(t,n={}){return this.log(t,w.Info,n)}async warn(t,n={}){return this.log(t,w.Warn,n)}async error(t,n={}){return this.log(t,w.Error,n)}setSync(t){this._sync=t}use(t){this._middleware.push(t)}remove(t){this._middleware=this._middleware.filter(n=>n!==t)}}class q extends K{async log(t,n=w.Info,o={}){return super.log(t,n,o)}}class Q extends q{constructor(t,n){super(t,Object.assign({batchSizeKiB:48},n));const o=async l=>{const u=await fetch(this._options.endpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this._sourceToken}`},body:JSON.stringify(l),keepalive:!0});if(u.ok)return l;throw new Error(u.statusText)};this.setSync(o),this.configureFlushOnPageLeave()}async log(t,n,o={}){return typeof o!="object"&&(o={extra:o}),o instanceof Error&&(o={error:o}),o=Object.assign(Object.assign({},this.getCurrentContext()),o),super.log(t,n,o)}getCurrentContext(){var t,n,o;const l={};return typeof window<"u"&&(l.url=(t=window.location)===null||t===void 0?void 0:t.href,l.device_pixel_ratio=window.devicePixelRatio,l.screen_width=(n=window.screen)===null||n===void 0?void 0:n.width,l.screen_height=(o=window.screen)===null||o===void 0?void 0:o.height,l.window_width=window.innerWidth,l.window_height=window.innerHeight),typeof navigator<"u"&&(l.user_locale=navigator.userLanguage||navigator.language,l.user_agent=navigator.userAgent),l}configureFlushOnPageLeave(){typeof document>"u"||document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&this.flush()})}}const W=new Q("#token-global-51540");function S(a,t,n={}){const o={message:t,...n,service:"kyc-app-frontend",environment:"production",url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()};W[a](t,o)}const Y={logtail:W,info:(a,t)=>S("info",a,t),warn:(a,t)=>S("warn",a,t),error:(a,t)=>S("error",a,t),debug:(a,t)=>S("debug",a,t)},E="https://aplicatie-superpartybyai-production-d067.up.railway.app";function V(){const[a,t]=x.useState([]),[n,o]=x.useState(!0),[l,u]=x.useState(!1),[p,s]=x.useState(""),[d,g]=x.useState("");x.useEffect(()=>{f();const e=setInterval(()=>{f()},3e3);return()=>clearInterval(e)},[]);const f=async()=>{try{const c=await(await v({op:"http.client",name:"GET /api/whatsapp/accounts"},()=>fetch(`${E}/api/whatsapp/accounts`))).json();console.log("üì± WhatsApp accounts loaded:",c.accounts),Y.info("WhatsApp accounts loaded",{count:c.accounts?.length||0}),c.success&&(t(c.accounts),c.accounts.forEach(y=>{console.log(`Account ${y.name}: status=${y.status}, hasQR=${!!y.qrCode}`)}))}catch(e){console.error("‚ùå Error loading accounts:",e)}finally{o(!1)}},m=async()=>{if(!p.trim()){alert("Introdu un nume pentru cont!");return}try{console.log("üîÑ Adding account:",p,"phone:",d);const e=await fetch(`${E}/api/whatsapp/add-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p,phone:d||void 0})});if(console.log("üì° Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const c=await e.json();if(console.log("üì¶ Response data:",c),c.success)u(!1),s(""),g(""),f(),alert("‚úÖ Cont adƒÉugat! A»ôteaptƒÉ QR code"+(d?" »ôi pairing code":"")+"...");else throw new Error(c.error||"Eroare necunoscutƒÉ")}catch(e){console.error("‚ùå Error adding account:",e),alert("‚ùå Eroare la adƒÉugarea contului: "+e.message)}},b=async e=>{if(confirm("Sigur vrei sƒÉ deconectezi acest cont?"))try{console.log("üîå Disconnecting account:",e);const c=await fetch(`${E}/api/whatsapp/accounts/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const y=await c.json();if(console.log("üì¶ Disconnect response:",y),y.success)f(),alert("‚úÖ Cont deconectat cu succes!");else throw new Error(y.error||"Eroare necunoscutƒÉ")}catch(c){console.error("‚ùå Error disconnecting account:",c),alert("‚ùå Eroare la deconectare: "+c.message)}},h=e=>{switch(e){case"connected":return"#10b981";case"qr_ready":return"#f59e0b";case"connecting":return"#3b82f6";default:return"#6b7280"}},i=e=>{switch(e){case"connected":return"‚úÖ Conectat";case"qr_ready":return"üì± ScaneazƒÉ QR";case"connecting":return"üîÑ Se conecteazƒÉ...";default:return"‚è∏Ô∏è Deconectat"}};return n?r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#9ca3af"},children:"Se √ÆncarcƒÉ..."}):r.jsxs("div",{style:{padding:"1rem",maxWidth:"100%",overflowX:"hidden"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",justifyContent:"space-between",alignItems:window.innerWidth<768?"stretch":"center",marginBottom:"1.5rem",gap:"1rem"},children:[r.jsxs("h2",{style:{margin:0,background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.5rem":"2rem",fontWeight:"800",textShadow:"0 0 20px rgba(0, 245, 255, 0.5)"},children:["üì± Conturi WhatsApp (",a.length,")"]}),r.jsx("button",{onClick:()=>u(!0),style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",color:"#0a0a0a",border:"2px solid #00f5ff",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:window.innerWidth<768?"1rem":"1.1rem",boxShadow:"0 0 20px rgba(0, 245, 255, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease",width:window.innerWidth<768?"100%":"auto"},onMouseOver:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.8), inset 0 0 15px rgba(255, 255, 255, 0.3)"},onMouseOut:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)"},children:"+ AdaugƒÉ Cont"})]}),a.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center",background:"rgba(0, 245, 255, 0.05)",border:"2px solid rgba(0, 245, 255, 0.3)",borderRadius:"16px",color:"#00f5ff",boxShadow:"0 0 30px rgba(0, 245, 255, 0.2)"},children:[r.jsx("p",{style:{fontSize:"1.125rem",marginBottom:"0.5rem",fontWeight:"600"},children:"üì≠ Niciun cont WhatsApp"}),r.jsx("p",{style:{color:"#00ff88"},children:"AdaugƒÉ primul cont pentru a √Æncepe!"})]}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:a.map(e=>r.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(0, 10, 20, 0.9) 0%, rgba(0, 20, 40, 0.9) 100%)",borderRadius:"16px",padding:"1.5rem",border:"2px solid rgba(0, 245, 255, 0.3)",boxShadow:"0 0 20px rgba(0, 245, 255, 0.2), inset 0 0 20px rgba(0, 245, 255, 0.05)",transition:"all 0.3s ease"},onMouseOver:c=>{c.currentTarget.style.borderColor="rgba(0, 245, 255, 0.6)",c.currentTarget.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.4), inset 0 0 30px rgba(0, 245, 255, 0.1)",c.currentTarget.style.transform="translateY(-5px)"},onMouseOut:c=>{c.currentTarget.style.borderColor="rgba(0, 245, 255, 0.3)",c.currentTarget.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.2), inset 0 0 20px rgba(0, 245, 255, 0.05)",c.currentTarget.style.transform="translateY(0)"},children:[r.jsx("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",justifyContent:"space-between",alignItems:(window.innerWidth<768,"start"),marginBottom:"1rem",gap:"0.5rem"},children:r.jsxs("div",{style:{width:"100%"},children:[r.jsx("h3",{style:{margin:"0 0 0.5rem 0",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.1rem":"1.3rem",fontWeight:"700"},children:e.name}),r.jsx("div",{style:{display:"inline-block",padding:"0.4rem 1rem",background:`linear-gradient(135deg, ${h(e.status)}40 0%, ${h(e.status)}20 100%)`,color:h(e.status),border:`2px solid ${h(e.status)}`,borderRadius:"8px",fontSize:"0.875rem",fontWeight:"700",boxShadow:`0 0 15px ${h(e.status)}40`,textTransform:"uppercase",letterSpacing:"0.5px"},children:i(e.status)})]})}),e.phone&&r.jsxs("p",{style:{margin:"0.5rem 0",color:"#00ff88",fontSize:"0.875rem",fontWeight:"500",textShadow:"0 0 10px rgba(0, 255, 136, 0.5)"},children:["üìû ",e.phone]}),e.qrCode&&(e.status==="qr_ready"||e.status==="reconnecting"||e.status==="logged_out")&&r.jsxs("div",{style:{marginTop:"1rem",textAlign:"center",padding:"1rem",background:"rgba(255, 165, 0, 0.05)",border:"2px solid rgba(255, 165, 0, 0.3)",borderRadius:"12px",boxShadow:"0 0 20px rgba(255, 165, 0, 0.2)"},children:[r.jsx("p",{style:{color:"#ffa500",fontSize:"1rem",marginBottom:"1rem",fontWeight:"700",textShadow:"0 0 10px rgba(255, 165, 0, 0.5)",textTransform:"uppercase",letterSpacing:"1px"},children:"üì± ScaneazƒÉ cu WhatsApp"}),r.jsx("img",{src:e.qrCode,alt:"QR Code",style:{width:window.innerWidth<768?"200px":"250px",height:window.innerWidth<768?"200px":"250px",margin:"0 auto",border:"3px solid #ffa500",borderRadius:"12px",padding:"0.5rem",background:"white",boxShadow:"0 0 30px rgba(255, 165, 0, 0.4)"}}),r.jsx("p",{style:{color:"#00ff88",fontSize:"0.75rem",marginTop:"0.75rem",fontWeight:"500"},children:"WhatsApp ‚Üí Settings ‚Üí Linked Devices ‚Üí Link a Device"}),e.pairingCode&&r.jsxs("div",{style:{marginTop:"1rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(138, 43, 226, 0.1) 0%, rgba(75, 0, 130, 0.1) 100%)",border:"2px solid rgba(138, 43, 226, 0.4)",borderRadius:"12px",boxShadow:"0 0 20px rgba(138, 43, 226, 0.3)"},children:[r.jsx("p",{style:{color:"#ba55d3",fontSize:"0.85rem",marginBottom:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px"},children:"SAU folose»ôte codul:"}),r.jsx("p",{style:{color:"#00f5ff",fontSize:window.innerWidth<768?"1.8rem":"2rem",fontWeight:"800",letterSpacing:"0.3em",margin:"1rem 0",fontFamily:"monospace",textShadow:"0 0 20px rgba(0, 245, 255, 0.6)",textAlign:"center"},children:e.pairingCode}),r.jsx("p",{style:{color:"#00ff88",fontSize:"0.75rem",marginTop:"0.75rem",fontWeight:"500"},children:"WhatsApp ‚Üí Settings ‚Üí Linked Devices ‚Üí Link with phone number"})]})]}),e.status==="connected"&&r.jsxs("div",{style:{marginTop:"1rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(0, 245, 255, 0.1) 100%)",border:"2px solid rgba(0, 255, 136, 0.4)",borderRadius:"12px",textAlign:"center",boxShadow:"0 0 30px rgba(0, 255, 136, 0.2)"},children:[r.jsx("p",{style:{color:"#00ff88",margin:"0 0 1rem 0",fontWeight:"700",fontSize:"1.1rem",textShadow:"0 0 15px rgba(0, 255, 136, 0.6)",textTransform:"uppercase",letterSpacing:"1px"},children:"‚úÖ Cont Activ"}),r.jsx("button",{onClick:()=>b(e.id),style:{padding:"1rem 1.5rem",background:"linear-gradient(135deg, #ff0080 0%, #ff0040 100%)",color:"white",border:"2px solid #ff0080",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:window.innerWidth<768?"0.95rem":"1rem",display:"block",margin:"0 auto",width:"100%",maxWidth:window.innerWidth<768?"100%":"250px",boxShadow:"0 0 20px rgba(255, 0, 128, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"1px"},onMouseOver:c=>{c.target.style.transform="scale(1.05)",c.target.style.boxShadow="0 0 30px rgba(255, 0, 128, 0.7), inset 0 0 15px rgba(255, 255, 255, 0.3)"},onMouseOut:c=>{c.target.style.transform="scale(1)",c.target.style.boxShadow="0 0 20px rgba(255, 0, 128, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2)"},children:"üîå DeconecteazƒÉ"})]})]},e.id))}),l&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:r.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(0, 10, 20, 0.95) 0%, rgba(0, 20, 40, 0.95) 100%)",border:"2px solid rgba(0, 245, 255, 0.4)",borderRadius:"16px",padding:window.innerWidth<768?"1.5rem":"2rem",maxWidth:"450px",width:"100%",boxShadow:"0 0 40px rgba(0, 245, 255, 0.3), inset 0 0 30px rgba(0, 245, 255, 0.05)"},children:[r.jsx("h3",{style:{margin:"0 0 1.5rem 0",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.3rem":"1.5rem",fontWeight:"800",textAlign:"center"},children:"‚ûï AdaugƒÉ Cont WhatsApp"}),r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#00f5ff",fontSize:"0.875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Nume cont:"}),r.jsx("input",{type:"text",value:p,onChange:e=>s(e.target.value),placeholder:"Ex: SuperParty Account 1",style:{width:"100%",padding:"0.75rem",background:"rgba(0, 245, 255, 0.05)",border:"2px solid rgba(0, 245, 255, 0.3)",borderRadius:"8px",color:"#00f5ff",marginBottom:"1rem",fontSize:"1rem",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor="rgba(0, 245, 255, 0.6)",e.target.style.boxShadow="0 0 15px rgba(0, 245, 255, 0.3)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 245, 255, 0.3)",e.target.style.boxShadow="none"}}),r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#00ff88",fontSize:"0.875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"NumƒÉr telefon (op»õional):"}),r.jsx("input",{type:"tel",value:d,onChange:e=>g(e.target.value),placeholder:"Ex: +40712345678",style:{width:"100%",padding:"0.75rem",background:"rgba(0, 255, 136, 0.05)",border:"2px solid rgba(0, 255, 136, 0.3)",borderRadius:"8px",color:"#00ff88",marginBottom:"0.5rem",fontSize:"1rem",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor="rgba(0, 255, 136, 0.6)",e.target.style.boxShadow="0 0 15px rgba(0, 255, 136, 0.3)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 255, 136, 0.3)",e.target.style.boxShadow="none"},onKeyPress:e=>e.key==="Enter"&&m()}),r.jsx("p",{style:{color:"#ba55d3",fontSize:"0.75rem",marginBottom:"1.5rem",marginTop:"0.5rem",fontWeight:"500"},children:"üí° DacƒÉ introduci numƒÉrul, vei primi »ôi un cod de 8 cifre"}),r.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem"},children:[r.jsx("button",{onClick:()=>{u(!1),s(""),g("")},style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, rgba(255, 0, 128, 0.2) 0%, rgba(255, 0, 64, 0.2) 100%)",color:"#ff0080",border:"2px solid rgba(255, 0, 128, 0.4)",borderRadius:"10px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.3s ease"},onMouseOver:e=>{e.target.style.background="linear-gradient(135deg, rgba(255, 0, 128, 0.3) 0%, rgba(255, 0, 64, 0.3) 100%)",e.target.style.boxShadow="0 0 20px rgba(255, 0, 128, 0.4)"},onMouseOut:e=>{e.target.style.background="linear-gradient(135deg, rgba(255, 0, 128, 0.2) 0%, rgba(255, 0, 64, 0.2) 100%)",e.target.style.boxShadow="none"},children:"‚úñ AnuleazƒÉ"}),r.jsx("button",{onClick:m,style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",color:"#0a0a0a",border:"2px solid #00f5ff",borderRadius:"10px",cursor:"pointer",fontWeight:"800",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"1px",boxShadow:"0 0 20px rgba(0, 245, 255, 0.5)",transition:"all 0.3s ease"},onMouseOver:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.7)"},onMouseOut:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.5)"},children:"‚úì AdaugƒÉ"})]})]})})]})}const j="https://us-central1-superparty-frontend.cloudfunctions.net/whatsappV4",H=[{id:"1",name:"Ion Popescu",phone:"+40721234567",unreadCount:2},{id:"2",name:"Maria Ionescu",phone:"+40722345678",unreadCount:0},{id:"3",name:"Andrei Georgescu",phone:"+40723456789",unreadCount:1}],T=!1;function G(){const[a,t]=x.useState([]),[n,o]=x.useState(null),[l,u]=x.useState([]),[p,s]=x.useState(""),[d,g]=x.useState(!0);x.useEffect(()=>{f();const i=D(j);return i.on("connect",()=>{console.log("‚úÖ Connected to backend")}),i.on("whatsapp:message",e=>{console.log("üí¨ New message received:",e),n&&e.message.from===n.id&&u(c=>[...c,{id:e.message.id,text:e.message.body,fromClient:!e.message.fromMe,timestamp:e.message.timestamp*1e3}]),f()}),()=>i.disconnect()},[n]);const f=async()=>{try{if(!T){const e=await(await fetch(`${j}/api/clients`)).json();e.success&&t(e.clients)}}catch(i){console.error("Failed to load clients:",i),t(H)}finally{g(!1)}},m=async i=>{try{if(!T){const c=await(await fetch(`${j}/api/clients/${i}/messages`)).json();c.success&&u(c.messages)}}catch(e){console.error("Failed to load messages:",e)}},b=async()=>{if(!(!p.trim()||!n))try{if(!T){const e=await(await fetch(`${j}/api/clients/${n.id}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:p})})).json();e.success&&(u(c=>[...c,e.message]),s(""))}}catch(i){console.error("Failed to send message:",i),alert("‚ùå Eroare la trimiterea mesajului")}},h=i=>{o(i),m(i.id)};return d?r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",color:"#9ca3af"},children:r.jsx("div",{children:"Se √ÆncarcƒÉ..."})}):r.jsxs("div",{style:{display:"flex",gap:"1rem",height:"600px",background:"#1f2937",borderRadius:"8px",overflow:"hidden"},children:[r.jsxs("div",{style:{width:"300px",borderRight:"1px solid #374151",display:"flex",flexDirection:"column"},children:[r.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #374151",fontWeight:"600",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("span",{children:["üí¨ Clien»õi (",a.length,")"]}),r.jsx("button",{onClick:()=>{g(!0),f()},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"4px",padding:"0.5rem",cursor:"pointer",fontSize:"1rem"},title:"Re√ÆmprospƒÉteazƒÉ lista",children:"üîÑ"})]}),r.jsx("div",{style:{flex:1,overflowY:"auto"},children:a.length===0?r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#9ca3af"},children:r.jsx("p",{children:"Niciun client disponibil"})}):a.map(i=>r.jsxs("div",{onClick:()=>h(i),style:{padding:"1rem",background:n?.id===i.id?"#3b82f6":"transparent",borderBottom:"1px solid #374151",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>{n?.id!==i.id&&(e.currentTarget.style.background="#374151")},onMouseLeave:e=>{n?.id!==i.id&&(e.currentTarget.style.background="transparent")},children:[r.jsx("div",{style:{fontWeight:"600",color:"white",marginBottom:"0.25rem"},children:i.name}),r.jsx("div",{style:{fontSize:"0.875rem",color:n?.id===i.id?"#e0e7ff":"#9ca3af"},children:i.phone}),i.unreadCount>0&&r.jsxs("div",{style:{marginTop:"0.5rem",display:"inline-block",background:"#ef4444",color:"white",padding:"0.125rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:[i.unreadCount," nou",i.unreadCount>1?"e":""]})]},i.id))})]}),r.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #374151",background:"#374151"},children:[r.jsx("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"white"},children:n.name}),r.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:n.phone})]}),r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:l.length===0?r.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"2rem"},children:"Niciun mesaj √ÆncƒÉ"}):l.map((i,e)=>r.jsxs("div",{style:{alignSelf:i.fromClient?"flex-start":"flex-end",maxWidth:"70%"},children:[r.jsx("div",{style:{padding:"0.75rem",borderRadius:"8px",background:i.fromClient?"#374151":"#3b82f6",color:"white"},children:i.text}),r.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem",textAlign:i.fromClient?"left":"right"},children:new Date(i.timestamp).toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"})})]},e))}),r.jsxs("div",{style:{padding:"1rem",borderTop:"1px solid #374151",display:"flex",gap:"0.5rem"},children:[r.jsx("input",{type:"text",value:p,onChange:i=>s(i.target.value),onKeyPress:i=>i.key==="Enter"&&b(),placeholder:"Scrie un mesaj...",style:{flex:1,padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"8px",color:"white",fontSize:"1rem"}}),r.jsx("button",{onClick:b,disabled:!p.trim(),style:{padding:"0.75rem 1.5rem",background:p.trim()?"#3b82f6":"#4b5563",color:"white",border:"none",borderRadius:"8px",cursor:p.trim()?"pointer":"not-allowed",fontSize:"1rem",fontWeight:"600"},children:"Trimite"})]})]}):r.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",flexDirection:"column",gap:"1rem"},children:[r.jsx("div",{style:{fontSize:"4rem"},children:"üí¨"}),r.jsx("p",{style:{fontSize:"1.25rem"},children:"SelecteazƒÉ un client"}),r.jsx("p",{style:{fontSize:"0.875rem"},children:"pentru a vedea conversa»õia"})]})})]})}function ne(){const a=B(),n=O.currentUser?.email==="ursache.andrei1995@gmail.com",[o,l]=x.useState("accounts"),[u,p]=x.useState(null);return x.useEffect(()=>{if(!n){alert("‚õî Acces interzis! Doar administratorul poate accesa aceastƒÉ paginƒÉ."),a("/home");return}fetch("https://us-central1-superparty-frontend.cloudfunctions.net/whatsappV4/api/whatsapp/accounts").then(s=>s.json()).then(s=>{const d=s.accounts?.find(g=>g.status==="connected");d&&(p(d),l("chat"))}).catch(s=>console.error("Error:",s))},[n,a]),n?r.jsxs("div",{className:"page-container",children:[r.jsx("div",{className:"page-header",children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[r.jsxs("div",{children:[r.jsx("h1",{children:"üí¨ Chat Clienti - WhatsApp"}),r.jsx("p",{className:"page-subtitle",children:o==="chat"?"Conversa»õii cu clien»õii":"Gestionare conturi WhatsApp"})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>l("chat"),className:o==="chat"?"btn-primary":"btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"üí¨ Chat"}),r.jsx("button",{onClick:()=>l("accounts"),className:o==="accounts"?"btn-primary":"btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"‚öôÔ∏è Accounts"})]}),r.jsx("button",{onClick:()=>a("/home"),className:"btn-secondary",children:"‚Üê √énapoi"})]})]})}),o==="accounts"?r.jsx(V,{}):r.jsx(G,{})]}):null}export{ne as default};

import{j as e,a as se,d as g,c as kt,b as At,s as Nt}from"./index-BdPRXwj2.js";import{b as i,u as Rt}from"./react-vendor-BCVUYfxV.js";import{J as Et,G as I,H as S,K as xe,M as Re,D as k,I as Z,B as Ge,t as G,x as It,N as ie,u as ee,O as Ke,y as Bt,z as Mt,A as Tt}from"./firebase-CZFSqwcK.js";import{l as Ve}from"./index-CG1tBJBN.js";const be="https://aplicatie-superpartybyai-production.up.railway.app",Dt=[{id:"1",name:"Ion Popescu",phone:"+40721234567",unreadCount:2},{id:"2",name:"Maria Ionescu",phone:"+40722345678",unreadCount:0},{id:"3",name:"Andrei Georgescu",phone:"+40723456789",unreadCount:1}],Ee=!1;function Wt(){const[u,l]=i.useState([]),[b,D]=i.useState(null),[K,B]=i.useState([]),[C,M]=i.useState(""),[T,_]=i.useState(!0);i.useEffect(()=>{V();const a=Ve(be);return a.on("connect",()=>{console.log("âœ… Connected to backend")}),a.on("whatsapp:message",o=>{console.log("ğŸ’¬ New message received:",o),b&&o.message.from===b.id&&B(f=>[...f,{id:o.message.id,text:o.message.body,fromClient:!o.message.fromMe,timestamp:o.message.timestamp*1e3}]),V()}),()=>a.disconnect()},[b]);const V=async()=>{try{if(!Ee){const o=await(await fetch(`${be}/api/clients`)).json();o.success&&l(o.clients)}}catch(a){console.error("Failed to load clients:",a),l(Dt)}finally{_(!1)}},W=async a=>{try{if(!Ee){const f=await(await fetch(`${be}/api/clients/${a}/messages`)).json();f.success&&B(f.messages)}}catch(o){console.error("Failed to load messages:",o)}},A=async()=>{if(!(!C.trim()||!b))try{if(!Ee){const o=await(await fetch(`${be}/api/clients/${b.id}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:C})})).json();o.success&&(B(f=>[...f,o.message]),M(""))}}catch(a){console.error("Failed to send message:",a),alert("âŒ Eroare la trimiterea mesajului")}},w=a=>{D(a),W(a.id)};return T?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",color:"#9ca3af"},children:e.jsx("div",{children:"Se Ã®ncarcÄƒ..."})}):e.jsxs("div",{style:{display:"flex",gap:"1rem",height:"600px",background:"#1f2937",borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("div",{style:{width:"300px",borderRight:"1px solid #374151",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #374151",fontWeight:"600",color:"white"},children:["ğŸ’¬ ClienÈ›i (",u.length,")"]}),e.jsx("div",{style:{flex:1,overflowY:"auto"},children:u.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#9ca3af"},children:e.jsx("p",{children:"Niciun client disponibil"})}):u.map(a=>e.jsxs("div",{onClick:()=>w(a),style:{padding:"1rem",background:b?.id===a.id?"#3b82f6":"transparent",borderBottom:"1px solid #374151",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:o=>{b?.id!==a.id&&(o.currentTarget.style.background="#374151")},onMouseLeave:o=>{b?.id!==a.id&&(o.currentTarget.style.background="transparent")},children:[e.jsx("div",{style:{fontWeight:"600",color:"white",marginBottom:"0.25rem"},children:a.name}),e.jsx("div",{style:{fontSize:"0.875rem",color:b?.id===a.id?"#e0e7ff":"#9ca3af"},children:a.phone}),a.unreadCount>0&&e.jsxs("div",{style:{marginTop:"0.5rem",display:"inline-block",background:"#ef4444",color:"white",padding:"0.125rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:[a.unreadCount," nou",a.unreadCount>1?"e":""]})]},a.id))})]}),e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:b?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #374151",background:"#374151"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"white"},children:b.name}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:b.phone})]}),e.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:K.length===0?e.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"2rem"},children:"Niciun mesaj Ã®ncÄƒ"}):K.map((a,o)=>e.jsxs("div",{style:{alignSelf:a.fromClient?"flex-start":"flex-end",maxWidth:"70%"},children:[e.jsx("div",{style:{padding:"0.75rem",borderRadius:"8px",background:a.fromClient?"#374151":"#3b82f6",color:"white"},children:a.text}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem",textAlign:a.fromClient?"left":"right"},children:new Date(a.timestamp).toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"})})]},o))}),e.jsxs("div",{style:{padding:"1rem",borderTop:"1px solid #374151",display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"text",value:C,onChange:a=>M(a.target.value),onKeyPress:a=>a.key==="Enter"&&A(),placeholder:"Scrie un mesaj...",style:{flex:1,padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"8px",color:"white",fontSize:"1rem"}}),e.jsx("button",{onClick:A,disabled:!C.trim(),style:{padding:"0.75rem 1.5rem",background:C.trim()?"#3b82f6":"#4b5563",color:"white",border:"none",borderRadius:"8px",cursor:C.trim()?"pointer":"not-allowed",fontSize:"1rem",fontWeight:"600"},children:"Trimite"})]})]}):e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",flexDirection:"column",gap:"1rem"},children:[e.jsx("div",{style:{fontSize:"4rem"},children:"ğŸ’¬"}),e.jsx("p",{style:{fontSize:"1.25rem"},children:"SelecteazÄƒ un client"}),e.jsx("p",{style:{fontSize:"0.875rem"},children:"pentru a vedea conversaÈ›ia"})]})})]})}const ye="https://aplicatie-superpartybyai-production.up.railway.app",$t=[{id:"acc1",name:"Support 1",status:"connected",phone:"+40721111111"},{id:"acc2",name:"VÃ¢nzÄƒri",status:"connected",phone:"+40722222222"},{id:"acc3",name:"Marketing",status:"qr_ready",phone:null}],_t=!1;function Lt(){const[u,l]=i.useState([]),[b,D]=i.useState(null),[K,B]=i.useState(!1),[C,M]=i.useState(null),[T,_]=i.useState(null),[V,W]=i.useState(null),[A,w]=i.useState(!1);i.useEffect(()=>{const c=Ve(ye);return W(c),a(),c.on("whatsapp:qr",h=>{console.log("ğŸ“± QR Code received:",h.accountId),M(h.qrCode)}),c.on("whatsapp:pairing_code",h=>{console.log("ğŸ”¢ Pairing code received:",h.code),_(h.code)}),c.on("whatsapp:ready",h=>{console.log("âœ… Account ready:",h.accountId),M(null),_(null),a()}),c.on("whatsapp:auth_failure",h=>{console.error("âŒ Auth failed:",h.accountId),alert(`âŒ Autentificare eÈ™uatÄƒ pentru ${h.accountId}`)}),c.on("whatsapp:disconnected",h=>{console.log("ğŸ”Œ Disconnected:",h.accountId),a()}),()=>{c&&c.disconnect()}},[]);const a=async()=>{w(!0);try{if(!_t){const h=await(await fetch(`${ye}/api/accounts`)).json();h.success&&l(h.accounts)}}catch(c){console.error("Failed to load accounts:",c),l($t)}finally{w(!1)}},o=async(c,h=null)=>{w(!0),_(null),M(null);try{const L=await(await fetch(`${ye}/api/accounts/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,phoneNumber:h})})).json();L.success?B(!1):alert(`âŒ Eroare: ${L.error}`)}catch($){console.error("Failed to add account:",$),alert("âŒ Eroare la adÄƒugarea contului")}finally{w(!1)}},f=async c=>{if(confirm("Sigur vrei sÄƒ È™tergi acest cont WhatsApp?"))try{(await(await fetch(`${ye}/api/accounts/${c}`,{method:"DELETE"})).json()).success&&(a(),b?.id===c&&D(null),alert("âœ… Cont È™ters cu succes!"))}catch(h){console.error("Failed to remove account:",h),alert("âŒ Eroare la È™tergerea contului")}},Y=c=>{switch(c){case"connected":return"#10b981";case"qr_ready":return"#f59e0b";case"connecting":return"#3b82f6";case"disconnected":return"#ef4444";case"auth_failed":return"#dc2626";default:return"#6b7280"}},ve=c=>{switch(c){case"connected":return"âœ… Conectat";case"qr_ready":return"ğŸ“± ScaneazÄƒ QR";case"connecting":return"â³ Se conecteazÄƒ...";case"disconnected":return"ğŸ”Œ Deconectat";case"auth_failed":return"âŒ Autentificare eÈ™uatÄƒ";default:return"âšª Necunoscut"}};return e.jsxs("div",{style:{background:"#1f2937",borderRadius:"12px",padding:"1.5rem",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("h3",{style:{margin:0,color:"white",fontSize:"1.25rem"},children:["ğŸ“± Conturi WhatsApp (",u.length,"/20)"]}),e.jsx("button",{onClick:()=>B(!0),disabled:u.length>=20,style:{padding:"0.5rem 1rem",background:u.length>=20?"#4b5563":"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:u.length>=20?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"600"},children:"â• AdaugÄƒ Cont"})]}),A&&u.length===0?e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af"},children:e.jsx("div",{children:"Se Ã®ncarcÄƒ..."})}):u.length===0?e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem",color:"#9ca3af"},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"ğŸ“±"}),e.jsx("p",{children:"Niciun cont WhatsApp adÄƒugat"}),e.jsx("p",{style:{fontSize:"0.875rem"},children:"ApasÄƒ butonul de mai sus pentru a adÄƒuga primul cont"})]}):e.jsx("div",{style:{flex:1,overflowY:"auto",display:"flex",flexDirection:"column",gap:"0.75rem"},children:u.map(c=>e.jsxs("div",{style:{padding:"1rem",background:"#374151",borderRadius:"8px",border:`2px solid ${Y(c.status)}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"white",marginBottom:"0.25rem"},children:c.name}),c.phone&&e.jsxs("div",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:["ğŸ“ ",c.phone]})]}),e.jsx("button",{onClick:()=>f(c.id),style:{background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"none",borderRadius:"4px",padding:"0.25rem 0.5rem",cursor:"pointer",fontSize:"0.75rem",fontWeight:"600"},children:"ğŸ—‘ï¸ È˜terge"})]}),e.jsx("div",{style:{display:"inline-block",padding:"0.25rem 0.75rem",background:`${Y(c.status)}20`,color:Y(c.status),borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:ve(c.status)})]},c.id))}),K&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"#374151",borderRadius:"12px",padding:"2rem",maxWidth:"500px",width:"90%"},children:[e.jsx("h3",{style:{marginBottom:"1.5rem",color:"white"},children:"â• AdaugÄƒ Cont WhatsApp"}),e.jsxs("form",{onSubmit:c=>{c.preventDefault();const h=c.target.name.value,$=c.target.phoneNumber.value;h.trim()&&o(h,$||null)},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#d1d5db",fontSize:"0.875rem"},children:"Nume cont"}),e.jsx("input",{type:"text",name:"name",placeholder:"Ex: Support 1, VÃ¢nzÄƒri, etc.",required:!0,style:{width:"100%",padding:"0.75rem",background:"#1f2937",border:"1px solid #4b5563",borderRadius:"8px",color:"white",fontSize:"1rem"}})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#d1d5db",fontSize:"0.875rem"},children:"NumÄƒr telefon (opÈ›ional - pentru cod pairing)"}),e.jsx("input",{type:"tel",name:"phoneNumber",placeholder:"Ex: 40737571397 (fÄƒrÄƒ +)",style:{width:"100%",padding:"0.75rem",background:"#1f2937",border:"1px solid #4b5563",borderRadius:"8px",color:"white",fontSize:"1rem"}})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>B(!1),style:{padding:"0.75rem 1.5rem",background:"#4b5563",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem"},children:"AnuleazÄƒ"}),e.jsx("button",{type:"submit",disabled:A,style:{padding:"0.75rem 1.5rem",background:A?"#4b5563":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:A?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"600"},children:A?"â³ Se adaugÄƒ...":"AdaugÄƒ"})]})]})]})}),(C||T)&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1001},children:e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",textAlign:"center",maxWidth:"500px"},children:[C&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{marginBottom:"1rem",color:"#1f2937"},children:"ğŸ“± ScaneazÄƒ QR Code"}),e.jsx("p",{style:{marginBottom:"1.5rem",color:"#6b7280"},children:"Deschide WhatsApp pe telefon È™i scaneazÄƒ acest cod"}),e.jsx("img",{src:C,alt:"QR Code",style:{width:"300px",height:"300px",border:"2px solid #e5e7eb",borderRadius:"8px"}})]}),T&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{marginTop:C?"2rem":0,marginBottom:"1rem",color:"#1f2937"},children:"ğŸ”¢ Cod Pairing"}),e.jsx("p",{style:{marginBottom:"1rem",color:"#6b7280"},children:"Introdu acest cod Ã®n WhatsApp pe telefon:"}),e.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",color:"#10b981",letterSpacing:"0.5rem",padding:"1rem",background:"#f3f4f6",borderRadius:"8px",marginBottom:"1rem"},children:T}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"WhatsApp â†’ Linked Devices â†’ Link a Device â†’ Link with phone number"})]}),e.jsx("p",{style:{marginTop:"1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:"AÈ™teptÄƒm conectarea..."})]})})]})}function Gt(){const u=Rt(),[l,b]=i.useState(se.currentUser),[D,K]=i.useState(null),[B,C]=i.useState(!1),[M,T]=i.useState(!1),[_,V]=i.useState(!1),[W,A]=i.useState(!1),[w,a]=i.useState(!1),[o,f]=i.useState("dashboard"),[Y,ve]=i.useState([]),[c,h]=i.useState([]),[$,L]=i.useState(!1),[q,Ye]=i.useState(null),[je,qe]=i.useState([]),[te,Ie]=i.useState(!1),[Se,He]=i.useState([]),[re,Qe]=i.useState(null),[Be,Je]=i.useState([]),[ae,Me]=i.useState(!1),[Xe,oe]=i.useState(!1),[N,Te]=i.useState(null),[P,ce]=i.useState(""),[Ce,le]=i.useState(""),[H,De]=i.useState(!1),[Q,we]=i.useState({}),Ze=i.useRef(null),de=i.useRef(null),[J,U]=i.useState(()=>{const t=localStorage.getItem("chat_history");if(t)try{return JSON.parse(t)}catch{return[{role:"assistant",content:"BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?"}]}return[{role:"assistant",content:"BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?"}]}),[me,ze]=i.useState(""),[ue,We]=i.useState(!1),[$e,pe]=i.useState(!1),[he,et]=i.useState(localStorage.getItem("theme")||"dark"),[O,ke]=i.useState([]),_e=i.useRef(null);i.useEffect(()=>{localStorage.setItem("chat_history",JSON.stringify(J))},[J]),i.useEffect(()=>{document.body.className=he==="light"?"light-theme":"",localStorage.setItem("theme",he)},[he]);const tt=()=>{et(t=>t==="dark"?"light":"dark")},[F,rt]=i.useState({evenimenteTotal:0,evenimenteNealocate:0,staffTotal:0,kycPending:0}),[nt,st]=i.useState(!0);i.useEffect(()=>{const t=Et(se,r=>{console.log("Auth state changed:",r?.email||"No user"),b(r)});return()=>t()},[]),i.useEffect(()=>{(async()=>{if(l){const r=await Ge(G(g,"staffProfiles",l.uid));r.exists()&&K(r.data())}})(),ut()},[l]),i.useEffect(()=>{w&&o==="gm-conversations"&&Se.length===0&&Le()},[w,o]);const Le=async()=>{Me(!0);try{const t=I(S(g,"aiConversations"),xe("timestamp","desc"),Re(1e3)),n=(await k(t)).docs.map(m=>({id:m.id,...m.data(),timestamp:m.data().timestamp?.toDate()})),s={};n.forEach(m=>{const p=m.userId;s[p]||(s[p]={userId:p,userName:m.userName||"Unknown",userEmail:m.userEmail||"unknown@email.com",conversations:[],lastConversation:m.timestamp}),s[p].conversations.push(m)});const d=Object.values(s).sort((m,p)=>p.lastConversation-m.lastConversation);console.log("ğŸ“Š GM Users loaded:",d.length,"users"),console.log("ğŸ’¬ Total conversations:",n.length);const y=I(S(g,"aiCorrections")),v=await k(y),j={};v.docs.forEach(m=>{const p=m.data();j[p.conversationId]={id:m.id,...p,correctedAt:p.correctedAt?.toDate()}}),console.log("âœï¸ Corrections loaded:",Object.keys(j).length),He(d),h(n),we(j)}catch(t){console.error("âŒ Error loading GM users:",t),alert("Eroare la Ã®ncÄƒrcarea userilor: "+t.message)}finally{Me(!1)}},it=t=>{Qe(t),Je(t.conversations)},at=t=>{Te(t);const r=Q[t.id];r?(ce(r.correctedResponse),le(r.correctionPrompt||"")):(ce(t.aiResponse),le("")),oe(!0)},ot=async()=>{if(!P.trim()){alert("Te rog sÄƒ scrii rÄƒspunsul corect!");return}De(!0);try{const t=Q[N.id];if(t){const r=G(g,"aiCorrections",t.id),n={correctedResponse:P.trim(),correctionPrompt:Ce.trim(),correctedBy:l.uid,correctedByEmail:l.email,correctedAt:ee(),applied:!1};await ie(r,n),we(s=>({...s,[N.id]:{...t,...n,correctedAt:new Date}})),alert("âœ… CorecÈ›ie actualizatÄƒ cu succes!")}else{const r={conversationId:N.id,originalResponse:N.aiResponse,correctedResponse:P.trim(),correctionPrompt:Ce.trim(),correctedBy:l.uid,correctedByEmail:l.email,correctedAt:ee(),applied:!1},n=await Ke(S(g,"aiCorrections"),r);we(s=>({...s,[N.id]:{id:n.id,...r,correctedAt:new Date}})),alert("âœ… CorecÈ›ie salvatÄƒ cu succes!")}oe(!1),Te(null),ce(""),le("")}catch(t){console.error("Error saving correction:",t),alert("âŒ Eroare la salvarea corecÈ›iei: "+t.message)}finally{De(!1)}},Ae=async()=>{L(!0);try{const t=I(S(g,"users"),Z("status","==","pendingApproval")),n=(await k(t)).docs.map(s=>({id:s.id,...s.data()}));ve(n)}catch(t){console.error("Error loading KYC submissions:",t)}finally{L(!1)}},ct=async()=>{L(!0);try{const t=I(S(g,"aiConversations"),xe("timestamp","desc"),Re(50)),n=(await k(t)).docs.map(s=>({id:s.id,...s.data()}));h(n)}catch(t){console.error("Error loading conversations:",t)}finally{L(!1)}},lt=async t=>{if(confirm("Aprobi aceastÄƒ cerere KYC?"))try{await ie(G(g,"users",t),{status:"approved",kycStatus:"approved",approvedAt:ee(),approvedBy:l.uid}),alert("âœ… KYC aprobat cu succes!"),Ae()}catch(r){console.error("Error approving KYC:",r),alert("âŒ Eroare la aprobare: "+r.message)}},dt=async t=>{const r=prompt("Motiv respingere:");if(r)try{await ie(G(g,"users",t),{status:"rejected",kycStatus:"rejected",rejectionReason:r,rejectedAt:ee(),rejectedBy:l.uid}),alert("âœ… KYC respins!"),Ae()}catch(n){console.error("Error rejecting KYC:",n),alert("âŒ Eroare la respingere: "+n.message)}},Pe=async()=>{Ie(!0);try{const t=I(S(g,"performanceMetrics"),xe("timestamp","desc"),Re(1)),r=await k(t);r.empty||Ye(r.docs[0].data());const n=I(S(g,"performanceAlerts"),Z("resolved","==",!1),xe("createdAt","desc")),d=(await k(n)).docs.map(y=>({id:y.id,...y.data()}));qe(d)}catch(t){console.error("Error loading performance metrics:",t)}finally{Ie(!1)}},mt=async t=>{try{await ie(G(g,"performanceAlerts",t),{resolved:!0,resolvedAt:ee(),resolvedBy:l.uid}),Pe()}catch(r){console.error("Error resolving alert:",r),alert("âŒ Eroare la rezolvare: "+r.message)}},ut=async()=>{try{const t=l?.email==="ursache.andrei1995@gmail.com",n=(await k(S(g,"evenimente"))).docs.map(m=>({id:m.id,...m.data()})),s=n.filter(m=>(m.staffAlocat||[]).length===0),d=await k(I(S(g,"users"),Z("status","==","approved"))),y=new Date().toISOString().split("T")[0],v=n.filter(m=>(m.data||m.dataStart)===y);let j=0;t&&(j=(await k(I(S(g,"users"),Z("status","==","pendingApproval")))).size),rt({evenimenteTotal:n.length,evenimenteAstazi:v.length,evenimenteNealocate:s.length,staffTotal:d.size,kycPending:j})}catch(t){console.error("Error loading stats:",t)}finally{st(!1)}},pt=async()=>{await It(se),u("/")};i.useEffect(()=>{de.current&&(de.current.scrollTop=de.current.scrollHeight)},[J]);const ht=async()=>{try{const t={user:{email:l?.email,nume:D?.nume||"Necunoscut",code:D?.code},stats:F,isAdmin:l?.email==="ursache.andrei1995@gmail.com"},r=I(S(g,"evenimente"),Z("staffAlocat","array-contains",l.uid)),n=await k(r);return t.evenimenteUser=n.docs.map(s=>({nume:s.data().nume,data:s.data().data,locatie:s.data().locatie,rol:s.data().rol})),t}catch(t){return console.error("Error getting context:",t),null}},gt=async t=>{const r=t.toLowerCase();if(r==="gm"||r==="g m"||r.includes("modul gm"))return a(!0),f("gm-conversations"),"ğŸ® Modul GM activat! Vezi conversaÈ›iile userilor Ã®n panoul din stÃ¢nga.";if(r.includes("alocÄƒ")||r.includes("aloca")){const n=r.match(/(\d{4}-\d{2}-\d{2})|(\d{1,2}\s+\w+)/g);if(!n||n.length<2)return'Te rog sÄƒ specifici intervalul de date. Exemplu: "AlocÄƒ evenimente din 2024-01-01 pÃ¢nÄƒ la 2024-01-31"';try{const d=(await k(S(g,"evenimente"))).docs.map(x=>({id:x.id,...x.data()})),y=d.filter(x=>!x.staffAlocat||x.staffAlocat.length===0);if(y.length===0)return"âœ… Nu existÄƒ evenimente nealocate!";const j=(await k(I(S(g,"users"),Z("status","==","approved")))).docs.map(x=>({id:x.id,...x.data()})),p=(await k(S(g,"disponibilitati"))).docs.map(x=>({id:x.id,...x.data()}));let ge=0;for(const x of y){const R=x.data||x.dataStart,ne=x.nrStaffNecesar||1,Oe=j.filter(X=>{const Ne=p.some(z=>z.userId!==X.uid||z.tipDisponibilitate==="indisponibil"?!1:R>=z.dataStart&&R<=z.dataEnd),fe=d.some(z=>z.id===x.id||!z.staffAlocat||!z.staffAlocat.includes(X.uid)?!1:(z.data||z.dataStart)===R);return Ne&&!fe});Oe.sort((X,Ne)=>{const fe=p.some(E=>E.userId===X.uid&&E.tipDisponibilitate==="preferinta"&&R>=E.dataStart&&R<=E.dataEnd),z=p.some(E=>E.userId===Ne.uid&&E.tipDisponibilitate==="preferinta"&&R>=E.dataStart&&R<=E.dataEnd);return fe&&!z?-1:!fe&&z?1:0});const Fe=Oe.slice(0,ne).map(X=>X.uid);Fe.length>0&&(await ie(G(g,"evenimente",x.id),{staffAlocat:Fe,dataAlocare:new Date,alocatDe:"AI Chat"}),ge++)}return`âœ… Alocare completÄƒ! Am alocat ${ge} din ${y.length} evenimente. Vezi rezultatele Ã®n pagina Evenimente.`}catch(s){return console.error("Error in alocare:",s),"âŒ Eroare la alocare: "+s.message}}if(r.includes("evenimente")&&(r.includes("aratÄƒ")||r.includes("vezi")))return u("/evenimente"),"Te-am dus la Evenimente.";if(r.includes("disponibilitate"))return u("/disponibilitate"),"Te-am dus la Disponibilitate.";if(r.includes("salarizare")||r.includes("salarii"))return u("/salarizare"),"Te-am dus la Salarizare.";if(r.includes("È™oferi")||r.includes("soferi"))return u("/soferi"),"Te-am dus la Management È˜oferi.";if(r.includes("admin")){const n=se.currentUser;return n?(l||b(n),n.email?.trim().toLowerCase()==="ursache.andrei1995@gmail.com"?(A(!0),f("admin-kyc"),`âœ… Mod Admin activat! VerificÄƒ sidebar-ul - ai acum acces la:
â€¢ ğŸ‘¥ Admin KYC
â€¢ ğŸ’¬ ConversaÈ›ii AI

ğŸ’¡ Pentru a ieÈ™i din modul admin, apasÄƒ "IeÈ™i din Admin" din sidebar.`):"â›” Acces interzis. Doar administratorul poate accesa Admin Panel."):"â³ Se Ã®ncarcÄƒ datele utilizatorului... ÃncearcÄƒ din nou Ã®n cÃ¢teva secunde."}if(r.includes("gm")){const n=se.currentUser;return n?(l||b(n),n.email?.trim().toLowerCase()==="ursache.andrei1995@gmail.com"?(a(!0),f("gm-overview"),`âœ… Mod GM activat! VerificÄƒ sidebar-ul - ai acum acces la:
â€¢ ğŸ® GM Overview
â€¢ ğŸ“Š Analytics

ğŸ’¡ Pentru a ieÈ™i din modul GM, apasÄƒ "IeÈ™i din GM" din sidebar.`):"â›” Acces interzis. Doar administratorul poate accesa GM Mode."):"â³ Se Ã®ncarcÄƒ datele utilizatorului... ÃncearcÄƒ din nou Ã®n cÃ¢teva secunde."}return r.includes("cÃ¢te evenimente")||r.includes("cate evenimente")?`Ai ${F.evenimenteTotal} evenimente Ã®n total, din care ${F.evenimenteAstazi} astÄƒzi.`:r.includes("cÃ¢È›i staff")||r.includes("cati staff")?`Sunt ${F.staffTotal} membri staff activi.`:r.includes("performanÈ›Äƒ")||r.includes("performanta")||r.includes("task")||r.includes("cum merg")?await ft():null},ft=async()=>{try{const t=new Date().toISOString().split("T")[0],r=await Ge(G(g,"performanceMetrics",`${l.uid}_${t}`));if(!r.exists())return"Nu am date de performanÈ›Äƒ pentru astÄƒzi. Sistemul de monitorizare va genera raportul Ã®n curÃ¢nd.";const n=r.data(),s=n.overallScore>=90?"ğŸŸ¢":n.overallScore>=70?"ğŸŸ¡":n.overallScore>=50?"ğŸŸ ":"ğŸ”´",d=n.trend==="up"?"ğŸ“ˆ":n.trend==="down"?"ğŸ“‰":"â¡ï¸";return`${s} **Performance Score: ${n.overallScore}/100**

ğŸ“Š Detalii:
â€¢ Task-uri: ${n.tasksCompleted}/${n.tasksAssigned} (${n.completionRate}%)
â€¢ Calitate: ${n.qualityScore}/100
â€¢ Punctualitate: ${n.punctualityScore}/100
â€¢ Conformitate: ${n.complianceScore}/100

${d} Trend: ${n.trend} (${n.trendPercentage>0?"+":""}${n.trendPercentage}%)

${n.tasksOverdue>0?`âš ï¸ Ai ${n.tasksOverdue} task-uri Ã®n Ã®ntÃ¢rziere!`:"âœ… Toate task-urile la zi!"}`}catch(t){return console.error("Error fetching performance:",t),"Eroare la Ã®ncÄƒrcarea datelor de performanÈ›Äƒ."}},Ue=async()=>{if(!me.trim()&&O.length===0)return;const t=me.trim(),r=O;if(ze(""),ke([]),U(n=>[...n,{role:"user",content:t,images:r.map(s=>s.preview)}]),r.length===0){const n=await gt(t);if(n){U(s=>[...s,{role:"assistant",content:n}]);return}}We(!0);try{const n=await ht();if(r.length>0){const s=await vt(r),d=jt(r),y=St(t),v=await kt({action:"validate_image",message:t,imageUrls:s,meta:d,documentType:y,userContext:n});if(v.data.success)Ct(v.data);else throw new Error("Image validation failed")}else{const s=await At({messages:[...J.slice(-10),{role:"user",content:t}],userContext:n});if(s.data.success)U(d=>[...d,{role:"assistant",content:s.data.message}]);else throw new Error("AI response failed")}}catch(n){console.error("Chat error:",n);let s="Eroare la comunicarea cu AI. ÃncearcÄƒ din nou.";n.code==="unauthenticated"?s="Trebuie sÄƒ fii autentificat pentru a folosi AI.":n.code==="resource-exhausted"?s="LimitÄƒ de utilizare atinsÄƒ. ÃncearcÄƒ din nou mai tÃ¢rziu.":n.code==="failed-precondition"?s="Serviciul AI nu este configurat corect. ContacteazÄƒ administratorul.":n.code==="unavailable"&&(s="Serviciul AI este temporar indisponibil. ÃncearcÄƒ din nou."),U(d=>[...d,{role:"assistant",content:s}])}finally{We(!1)}},xt=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Browser-ul tÄƒu nu suportÄƒ recunoaÈ™tere vocalÄƒ. ÃncearcÄƒ Chrome.");return}const t=window.SpeechRecognition||window.webkitSpeechRecognition,r=new t;r.lang="ro-RO",r.continuous=!1,r.interimResults=!1,r.onstart=()=>{pe(!0)},r.onresult=n=>{const s=n.results[0][0].transcript;ze(s),pe(!1)},r.onerror=n=>{console.error("Speech recognition error:",n.error),pe(!1),alert("Eroare la recunoaÈ™tere vocalÄƒ: "+n.error)},r.onend=()=>{pe(!1)},r.start()},bt=async t=>{const r=Array.from(t.target.files);for(const n of r){if(O.length>=3){alert("PoÈ›i Ã®ncÄƒrca maxim 3 imagini simultan");break}if(n.size>3*1024*1024){alert(`${n.name} este prea mare (max 3MB). ComprimÄƒ imaginea È™i Ã®ncearcÄƒ din nou.`);continue}if(!["image/jpeg","image/png","image/webp"].includes(n.type)){alert(`${n.name} nu este format valid. FoloseÈ™te JPG, PNG sau WEBP.`);continue}const s=URL.createObjectURL(n);ke(d=>[...d,{file:n,preview:s,size:n.size,name:n.name,type:n.type}])}t.target.value=""},yt=t=>{ke(r=>{const n=r.filter((s,d)=>d!==t);return URL.revokeObjectURL(r[t].preview),n})},vt=async t=>{const r=t.map(async(n,s)=>{const y=`${Date.now()}_${s}_${n.name}`,v=Bt(Nt,`ai-validations/${l.uid}/${y}`);return await Mt(v,n.file),await Tt(v)});return await Promise.all(r)},jt=t=>{const r=t.map(s=>(s.size/1024/1024).toFixed(2)),n=t.some(s=>s.size>3*1024*1024);return`META has_image=true; image_count=${t.length}; image_size_mb=[${r.join(",")}]; user_says_over_3mb=${n}; user_priority=quality`},St=t=>{const r=t.toLowerCase();return r.includes("ci")||r.includes("carte")||r.includes("identitate")?"CI":r.includes("permis")?"permis":r.includes("cazier")?"cazier":r.includes("eveniment")||r.includes("pozÄƒ")||r.includes("poza")?"eveniment":r.includes("raport")?"raport":r.includes("facturÄƒ")||r.includes("factura")||r.includes("bon")?"factura":"unknown"},Ct=t=>{const{validation:r,message:n}=t,{overall_decision:s,per_image:d,need_user_action:y}=r;let v="",j="";switch(s){case"ACCEPT":v="âœ…",j="Document acceptat!";break;case"REJECT":v="âŒ",j="Document respins";break;case"REVIEW":v="âš ï¸",j="Document necesitÄƒ verificare";break;default:v="â“",j="Nu pot procesa documentul"}let m=`${v} **${j}**

${n}`;d&&d.length>0&&(m+=`

ğŸ“‹ Detalii per imagine:`,d.forEach((p,ge)=>{const x=p.app_decision==="ACCEPT"?"âœ…":p.app_decision==="REJECT"?"âŒ":p.app_decision==="REVIEW"?"âš ï¸":"â“";if(m+=`
${ge+1}. ${x} ${p.app_decision}`,p.detected_objects&&p.detected_objects.length>0){const R=p.detected_objects.filter(ne=>ne.label!=="UNKNOWN_RELEVANT").map(ne=>ne.label).join(", ");R&&(m+=`
   Detectat: ${R}`)}p.image_quality&&p.image_quality!=="unknown"&&(m+=`
   Calitate: ${p.image_quality}`)})),y&&y!=="none"&&(m+=`

ğŸ“Œ AcÈ›iune necesarÄƒ: ${wt(y)}`),U(p=>[...p,{role:"assistant",content:m,validationResult:r}])},wt=t=>({upload_image:"ÃncarcÄƒ imaginea",compress_to_3mb:"ComprimÄƒ imaginea sub 3MB",crop_zoom:"FÄƒ crop/zoom pe zona relevantÄƒ",better_photo:"FÄƒ o pozÄƒ mai bunÄƒ (luminÄƒ, focus, unghi perpendicular)",clarify_question:"ClarificÄƒ cererea",provide_app_rules:"SpecificÄƒ tipul documentului"})[t]||t,zt=async()=>{if(confirm("È˜tergi istoricul conversaÈ›iei? (Se va salva Ã®n sistem pentru admin)"))try{const t=J.filter(r=>r.role!=="assistant"||r.content!=="BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?");t.length>0&&await Ke(S(g,"aiConversations"),{userId:l.uid,userEmail:l.email,userName:D?.nume||l.displayName||"Unknown",conversationHistory:t,clearedAt:ee(),messageCount:t.length,type:"cleared_by_user"}),U([{role:"assistant",content:"BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?"}]),localStorage.removeItem("chat_history")}catch(t){console.error("Error saving conversation:",t),U([{role:"assistant",content:"BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?"}]),localStorage.removeItem("chat_history")}};return e.jsxs("div",{className:"home-clean",children:[e.jsx("div",{className:`sidebar-left ${B?"open":""}`,ref:Ze,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:e.jsxs("div",{className:"sidebar-content",children:[e.jsx("div",{className:"sidebar-header",children:e.jsx("h3",{children:"Meniu"})}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("button",{onClick:()=>{f("dashboard"),u("/home")},className:`nav-item ${o==="dashboard"?"active":""}`,children:[e.jsx("span",{className:"nav-icon",children:"ğŸ "}),e.jsx("span",{className:"nav-text",children:"AcasÄƒ"})]}),e.jsxs("button",{onClick:()=>u("/evenimente"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“…"}),e.jsx("span",{className:"nav-text",children:"Evenimente"})]}),e.jsxs("button",{onClick:()=>u("/disponibilitate"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ—“ï¸"}),e.jsx("span",{className:"nav-text",children:"Disponibilitate"})]}),e.jsxs("button",{onClick:()=>u("/salarizare"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ’°"}),e.jsx("span",{className:"nav-text",children:"Salarizare"})]}),e.jsxs("button",{onClick:()=>u("/soferi"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸš—"}),e.jsx("span",{className:"nav-text",children:"È˜oferi"})]}),e.jsxs("button",{onClick:()=>u("/centrala-telefonica"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“"}),e.jsx("span",{className:"nav-text",children:"CentralÄƒ TelefonicÄƒ"})]}),W&&l?.email==="ursache.andrei1995@gmail.com"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{borderTop:"1px solid #334155",margin:"0.5rem 0",opacity:.3}}),e.jsxs("button",{onClick:()=>f("admin-kyc"),className:`nav-item nav-item-admin ${o==="admin-kyc"?"active":""}`,children:[e.jsx("span",{className:"nav-icon",children:"ğŸ‘¥"}),e.jsx("span",{className:"nav-text",children:"Admin KYC"})]}),e.jsxs("button",{onClick:()=>f("admin-conversations"),className:`nav-item ${o==="admin-conversations"?"active":""}`,children:[e.jsx("span",{className:"nav-icon",children:"ğŸ’¬"}),e.jsx("span",{className:"nav-text",children:"ConversaÈ›ii AI"})]}),e.jsxs("button",{onClick:()=>u("/chat-clienti"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“±"}),e.jsx("span",{className:"nav-text",children:"Chat Clienti"})]}),e.jsxs("button",{onClick:()=>{A(!1),f("dashboard")},className:"nav-item nav-item-exit-admin",style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸšª"}),e.jsx("span",{className:"nav-text",children:"IeÈ™i din Admin"})]})]}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{borderTop:"1px solid #10b981",margin:"0.5rem 0",opacity:.5}}),e.jsxs("button",{onClick:()=>f("gm-conversations"),className:`nav-item ${o==="gm-conversations"?"active":""}`,style:{borderLeft:"3px solid #10b981"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸ’¬"}),e.jsx("span",{className:"nav-text",children:"ConversaÈ›ii AI"})]}),e.jsxs("button",{onClick:()=>f("gm-overview"),className:`nav-item ${o==="gm-overview"?"active":""}`,style:{borderLeft:"3px solid #10b981"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸ®"}),e.jsx("span",{className:"nav-text",children:"GM Overview"})]}),e.jsxs("button",{onClick:()=>f("gm-analytics"),className:`nav-item ${o==="gm-analytics"?"active":""}`,style:{borderLeft:"3px solid #10b981"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“Š"}),e.jsx("span",{className:"nav-text",children:"Analytics"})]}),e.jsxs("button",{onClick:()=>{a(!1),f("dashboard")},className:"nav-item",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸšª"}),e.jsx("span",{className:"nav-text",children:"IeÈ™i din GM"})]})]}),l?.email==="ursache.andrei1995@gmail.com"&&e.jsxs("button",{onClick:()=>u("/settings"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"âš™ï¸"}),e.jsx("span",{className:"nav-text",children:"SetÄƒri"})]})]})]})}),e.jsx("nav",{className:"navbar-clean",children:e.jsxs("div",{className:"nav-content",children:[e.jsx("h1",{children:"SuperParty"}),e.jsxs("div",{className:"nav-right",children:[W&&l?.email==="ursache.andrei1995@gmail.com"&&e.jsx("span",{style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",marginRight:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"ğŸ‘¨â€ğŸ’¼ Mod Admin"}),w&&l?.email==="ursache.andrei1995@gmail.com"&&e.jsx("span",{style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",marginRight:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"ğŸ® Mod GM"}),e.jsx("button",{className:"theme-toggle-nav",onClick:tt,title:"SchimbÄƒ tema",children:he==="dark"?"â˜€ï¸":"ğŸŒ™"}),e.jsx("span",{className:"user-email",children:l?.email}),e.jsx("button",{className:"btn-signout",onClick:pt,children:"Sign out"})]})]})}),e.jsx("div",{className:"home-content-clean",children:e.jsx("div",{className:"dashboard-container",children:o==="admin-kyc"&&W?e.jsxs("div",{children:[e.jsx("h2",{style:{marginBottom:"2rem",fontSize:"1.875rem",fontWeight:"700"},children:"ğŸ‘¥ Admin KYC - AprobÄƒri Pending"}),e.jsx("button",{onClick:Ae,style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600",marginBottom:"1.5rem"},children:"ğŸ”„ ReÃ®mprospÄƒteazÄƒ"}),$?e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Se Ã®ncarcÄƒ cererile KYC..."})]}):Y.length===0?e.jsx("p",{style:{padding:"2rem",background:"#1e293b",borderRadius:"0.5rem",textAlign:"center"},children:"âœ… Nu existÄƒ cereri KYC pending"}):e.jsx("div",{style:{display:"grid",gap:"1rem"},children:Y.map(t=>e.jsxs("div",{style:{padding:"1.5rem",background:"#1e293b",borderRadius:"0.5rem",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem"},children:[t.firstName," ",t.lastName]}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ“§ ",t.email]}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ“± ",t.phone||"N/A"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>lt(t.id),style:{padding:"0.5rem 1rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"600"},children:"âœ… AprobÄƒ"}),e.jsx("button",{onClick:()=>dt(t.id),style:{padding:"0.5rem 1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"600"},children:"âŒ Respinge"})]})]}),t.ciUrl&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ“„ Documente:"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.ciUrl&&e.jsx("a",{href:t.ciUrl,target:"_blank",rel:"noopener noreferrer",style:{padding:"0.5rem 1rem",background:"#334155",borderRadius:"0.375rem",fontSize:"0.875rem",textDecoration:"none",color:"white"},children:"ğŸ†” CI"}),t.permisUrl&&e.jsx("a",{href:t.permisUrl,target:"_blank",rel:"noopener noreferrer",style:{padding:"0.5rem 1rem",background:"#334155",borderRadius:"0.375rem",fontSize:"0.875rem",textDecoration:"none",color:"white"},children:"ğŸš— Permis"}),t.cazierUrl&&e.jsx("a",{href:t.cazierUrl,target:"_blank",rel:"noopener noreferrer",style:{padding:"0.5rem 1rem",background:"#334155",borderRadius:"0.375rem",fontSize:"0.875rem",textDecoration:"none",color:"white"},children:"ğŸ“‹ Cazier"})]})]})]},t.id))})]}):o==="admin-conversations"&&W?e.jsxs("div",{children:[e.jsx("h2",{style:{marginBottom:"2rem",fontSize:"1.875rem",fontWeight:"700"},children:"ğŸ’¬ ConversaÈ›ii AI - Istoric"}),e.jsx("button",{onClick:ct,style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600",marginBottom:"1.5rem"},children:"ğŸ”„ ReÃ®mprospÄƒteazÄƒ"}),$?e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Se Ã®ncarcÄƒ conversaÈ›iile..."})]}):c.length===0?e.jsx("p",{style:{padding:"2rem",background:"#1e293b",borderRadius:"0.5rem",textAlign:"center"},children:"ğŸ“­ Nu existÄƒ conversaÈ›ii salvate"}):e.jsx("div",{style:{display:"grid",gap:"1rem"},children:c.map(t=>e.jsxs("div",{style:{padding:"1.5rem",background:"#1e293b",borderRadius:"0.5rem",border:"1px solid #334155"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem"},children:t.userName||"Unknown User"}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ“§ ",t.userEmail]}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ• ",t.clearedAt?.toDate?.()?.toLocaleString("ro-RO")||t.timestamp?.toDate?.()?.toLocaleString("ro-RO")||"N/A"]}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ’¬ ",t.messageCount||t.conversationHistory?.length||0," mesaje"]})]}),t.conversationHistory&&t.conversationHistory.length>0&&e.jsxs("details",{style:{marginTop:"1rem"},children:[e.jsx("summary",{style:{cursor:"pointer",color:"#667eea",fontWeight:"600"},children:"Vezi conversaÈ›ia"}),e.jsx("div",{style:{marginTop:"1rem",maxHeight:"300px",overflowY:"auto",padding:"1rem",background:"#0f172a",borderRadius:"0.375rem"},children:t.conversationHistory.map((r,n)=>e.jsxs("div",{style:{marginBottom:"1rem",paddingBottom:"1rem",borderBottom:n<t.conversationHistory.length-1?"1px solid #334155":"none"},children:[e.jsx("p",{style:{fontWeight:"600",color:r.role==="user"?"#10b981":"#667eea",marginBottom:"0.5rem"},children:r.role==="user"?"ğŸ‘¤ User":"ğŸ¤– AI"}),e.jsx("p",{style:{fontSize:"0.875rem",whiteSpace:"pre-wrap"},children:r.content})]},n))})]})]},t.id))})]}):o==="gm-overview"&&w?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700"},children:"ğŸ® GM Overview - Control Panel"}),e.jsx("button",{onClick:Pe,disabled:te,style:{padding:"0.75rem 1.5rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.5rem",cursor:te?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"600",opacity:te?.6:1},children:te?"â³ Se Ã®ncarcÄƒ...":"ğŸ”„ ReÃ®mprospÄƒteazÄƒ"})]}),te?e.jsx("div",{style:{textAlign:"center",padding:"3rem",fontSize:"1.2rem",color:"#64748b"},children:"â³ Se Ã®ncarcÄƒ datele..."}):e.jsxs(e.Fragment,{children:[q?e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:"ğŸ“Š Metrici de PerformanÈ›Äƒ"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ¯ AcurateÈ›e"}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#10b981"},children:[q.accuracy?.toFixed(1)||0,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"ÈšintÄƒ: â‰¥85%"})]}),e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"âš¡ Timp RÄƒspuns"}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#3b82f6"},children:[q.avgResponseTime?.toFixed(0)||0,"ms"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"ÈšintÄƒ: â‰¤3000ms"})]}),e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"âŒ RatÄƒ Erori"}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#ef4444"},children:[q.errorRate?.toFixed(1)||0,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"ÈšintÄƒ: â‰¤5%"})]}),e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ“ˆ Total ValidÄƒri"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#8b5cf6"},children:q.totalValidations||0}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"Ultimele 24h"})]})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#64748b",textAlign:"right"},children:["Ultima actualizare: ",q.timestamp?.toDate?.()?.toLocaleString("ro-RO")||"N/A"]})]}):e.jsxs("div",{style:{padding:"2rem",background:"#1e293b",borderRadius:"0.75rem",border:"1px solid #334155",textAlign:"center",marginBottom:"2rem"},children:[e.jsx("p",{style:{fontSize:"1.1rem",color:"#94a3b8"},children:"ğŸ“Š Nu existÄƒ date de performanÈ›Äƒ disponibile"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",marginTop:"0.5rem"},children:'ApasÄƒ "ReÃ®mprospÄƒteazÄƒ" pentru a Ã®ncÄƒrca datele'})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:["ğŸš¨ Alerte Active (",je.length,")"]}),je.length===0?e.jsxs("div",{style:{padding:"2rem",background:"#1e293b",borderRadius:"0.75rem",border:"1px solid #334155",textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"1.1rem",color:"#10b981"},children:"âœ… Nu existÄƒ alerte active"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",marginTop:"0.5rem"},children:"Toate sistemele funcÈ›ioneazÄƒ normal"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:je.map(t=>e.jsx("div",{style:{padding:"1.5rem",background:"#1e293b",borderRadius:"0.75rem",border:`2px solid ${t.severity==="critical"?"#ef4444":t.severity==="warning"?"#f59e0b":"#3b82f6"}`,borderLeft:`6px solid ${t.severity==="critical"?"#ef4444":t.severity==="warning"?"#f59e0b":"#3b82f6"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",padding:"0.25rem 0.75rem",borderRadius:"0.25rem",background:t.severity==="critical"?"#ef4444":t.severity==="warning"?"#f59e0b":"#3b82f6",color:"white"},children:t.severity?.toUpperCase()}),e.jsx("span",{style:{fontSize:"0.875rem",color:"#94a3b8"},children:t.type})]}),e.jsx("p",{style:{fontSize:"1rem",color:"#e2e8f0",marginBottom:"0.5rem"},children:t.message}),e.jsxs("p",{style:{fontSize:"0.75rem",color:"#64748b"},children:["ğŸ• ",t.createdAt?.toDate?.()?.toLocaleString("ro-RO")||"N/A"]})]}),e.jsx("button",{onClick:()=>mt(t.id),style:{padding:"0.5rem 1rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",whiteSpace:"nowrap"},children:"âœ… RezolvÄƒ"})]})},t.id))})]}),e.jsxs("div",{style:{marginTop:"2rem"},children:[e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:"ğŸ“± Gestionare Conturi WhatsApp"}),e.jsx(Lt,{})]})]})]}):o==="gm-conversations"&&w?e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 200px)",gap:"1rem"},children:[e.jsxs("div",{style:{width:"300px",background:"#1e293b",borderRadius:"0.75rem",padding:"1rem",overflowY:"auto",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"ğŸ‘¥ Useri"}),e.jsx("button",{onClick:Le,disabled:ae,style:{padding:"0.5rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:ae?"not-allowed":"pointer",fontSize:"0.875rem"},children:ae?"â³":"ğŸ”„"})]}),ae?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b"},children:"â³ Se Ã®ncarcÄƒ..."}):Se.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b",fontSize:"0.875rem"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"ğŸ“­"}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:"Niciun user gÄƒsit"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#475569"},children:"ConversaÈ›iile apar aici dupÄƒ ce userii vorbesc cu AI-ul"})]}):Se.map(t=>e.jsxs("div",{onClick:()=>it(t),style:{padding:"0.75rem",marginBottom:"0.5rem",background:re?.userId===t.userId?"#334155":"#0f172a",borderRadius:"0.5rem",cursor:"pointer",border:re?.userId===t.userId?"2px solid #10b981":"1px solid #1e293b",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:t.userName}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#94a3b8",marginBottom:"0.25rem"},children:t.userEmail}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:["ğŸ’¬ ",t.conversations.length," conversaÈ›ii"]})]},t.userId))]}),e.jsx("div",{style:{flex:1,background:"#1e293b",borderRadius:"0.75rem",padding:"1.5rem",overflowY:"auto",border:"1px solid #334155"},children:re?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid #334155"},children:[e.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"0.5rem"},children:["ğŸ’¬ ConversaÈ›ii: ",re.userName]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#94a3b8"},children:[re.userEmail," â€¢ ",Be.length," conversaÈ›ii"]})]}),(()=>{const t={};return Be.forEach(r=>{const n=r.timestamp?.toLocaleDateString("ro-RO",{day:"2-digit",month:"2-digit",year:"numeric"})||"Data necunoscutÄƒ";t[n]||(t[n]=[]),t[n].push(r)}),Object.entries(t).map(([r,n])=>e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#10b981",display:"flex",alignItems:"center",gap:"0.5rem"},children:["ğŸ“… ",r]}),n.map(s=>{const d=Q[s.id];return e.jsxs("div",{style:{background:"#0f172a",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem",border:d?"2px solid #10b981":"1px solid #1e293b",position:"relative"},children:[d&&e.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#10b981",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"600"},children:"âœ“ Corectat"}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.5rem"},children:["ğŸ• ",s.timestamp?.toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.25rem"},children:"â“ User:"}),e.jsx("div",{style:{color:"#e2e8f0"},children:s.userMessage})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.25rem"},children:"ğŸ¤– AI:"}),e.jsx("div",{style:{color:"#cbd5e1"},children:s.aiResponse})]}),e.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>at(s),style:{padding:"0.5rem 1rem",background:d?"#0ea5e9":"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem"},children:d?"ğŸ‘ï¸ Vezi/EditeazÄƒ CorecÈ›ia":"âœï¸ CorecteazÄƒ"}),e.jsx("button",{style:{padding:"0.5rem 1rem",background:"#334155",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem"},children:"ğŸ‘ Bun"}),e.jsx("button",{style:{padding:"0.5rem 1rem",background:"#334155",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem"},children:"ğŸ‘ Prost"})]})]},s.id)})]},r))})()]}):e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#64748b"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ğŸ‘ˆ"}),e.jsx("div",{style:{fontSize:"1.2rem"},children:"SelecteazÄƒ un user din stÃ¢nga"})]})})]}):o==="gm-analytics"&&w?e.jsxs("div",{children:[e.jsx("h2",{style:{marginBottom:"2rem",fontSize:"1.875rem",fontWeight:"700"},children:"ğŸ“Š GM Analytics - Statistici Avansate"}),e.jsx("p",{style:{fontSize:"1.2rem",color:"#10b981"},children:"Analize detaliate È™i rapoarte pentru Game Master."}),e.jsx("p",{style:{marginTop:"1rem",padding:"1rem",background:"#1e293b",borderRadius:"0.5rem",borderLeft:"4px solid #10b981"},children:"ğŸš§ ConÈ›inut GM Analytics Ã®n curs de integrare..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{style:{marginBottom:"2rem",fontSize:"1.875rem",fontWeight:"700"},children:["Bine ai venit, ",D?.nume||l?.email,"!"]}),nt?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Se Ã®ncarcÄƒ statisticile..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dashboard-stats",children:[e.jsxs("div",{className:"stat-card",onClick:()=>u("/evenimente"),children:[e.jsx("h3",{children:"Evenimente Total"}),e.jsx("p",{children:F.evenimenteTotal}),e.jsx("span",{className:"stat-subtitle",children:"Vezi toate â†’"})]}),e.jsxs("div",{className:"stat-card",onClick:()=>u("/evenimente"),children:[e.jsx("h3",{children:"Evenimente Nealocate"}),e.jsx("p",{children:F.evenimenteNealocate}),e.jsx("span",{className:"stat-subtitle",children:"AlocÄƒ cu AI â†’"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Staff Activ"}),e.jsx("p",{children:F.staffTotal}),e.jsx("span",{className:"stat-subtitle",children:"membri aprobaÈ›i"})]})]}),e.jsxs("div",{style:{marginTop:"3rem"},children:[e.jsx("h3",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},children:"AcÈ›iuni Rapide"}),e.jsxs("div",{className:"quick-actions",children:[e.jsxs("button",{onClick:()=>u("/evenimente"),className:"action-card",children:[e.jsx("span",{className:"action-icon",children:"ğŸ“…"}),e.jsx("span",{className:"action-title",children:"Evenimente"}),e.jsx("span",{className:"action-subtitle",children:"Vezi toate evenimentele"})]}),e.jsxs("button",{onClick:()=>T(!0),className:"action-card",children:[e.jsx("span",{className:"action-icon",children:"ğŸ¤–"}),e.jsx("span",{className:"action-title",children:"Alocare AI"}),e.jsx("span",{className:"action-subtitle",children:"Cere AI-ului sÄƒ aloce"})]}),e.jsxs("button",{onClick:()=>u("/disponibilitate"),className:"action-card",children:[e.jsx("span",{className:"action-icon",children:"ğŸ—“ï¸"}),e.jsx("span",{className:"action-title",children:"Disponibilitate"}),e.jsx("span",{className:"action-subtitle",children:"MarcheazÄƒ cÃ¢nd eÈ™ti liber"})]}),e.jsxs("button",{onClick:()=>u("/soferi"),className:"action-card",children:[e.jsx("span",{className:"action-icon",children:"ğŸš—"}),e.jsx("span",{className:"action-title",children:"È˜oferi"}),e.jsx("span",{className:"action-subtitle",children:"Management È™oferi"})]}),e.jsxs("button",{onClick:()=>V(!0),className:"action-card",children:[e.jsx("span",{className:"action-icon",children:"ğŸ’¬"}),e.jsx("span",{className:"action-title",children:"Chat ClienÈ›i"}),e.jsx("span",{className:"action-subtitle",children:"ConversaÈ›ii cu clienÈ›ii"})]})]})]})]})]})})}),e.jsxs("div",{className:"ai-chat-container",children:[M&&e.jsxs("div",{className:"chat-window",children:[e.jsxs("div",{className:"chat-header",children:[e.jsx("h4",{children:"ğŸ¤– Asistent AI"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"chat-clear-btn",onClick:zt,title:"È˜terge istoric",children:"ğŸ—‘ï¸"}),e.jsx("button",{className:"chat-close",onClick:()=>T(!1),children:"âœ•"})]})]}),e.jsxs("div",{className:"chat-messages",ref:de,children:[J.map((t,r)=>e.jsx("div",{className:`chat-message ${t.role==="user"?"user":"bot"}`,children:t.content},r)),ue&&e.jsx("div",{className:"chat-message bot",children:e.jsxs("div",{className:"typing-indicator",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})})]}),O.length>0&&e.jsx("div",{className:"chat-image-preview",children:O.map((t,r)=>e.jsxs("div",{className:"preview-item",children:[e.jsx("img",{src:t.preview,alt:`Preview ${r+1}`}),e.jsxs("span",{className:"image-size",children:[(t.size/1024/1024).toFixed(2)," MB"]}),e.jsx("button",{className:"remove-image",onClick:()=>yt(r),children:"âœ•"})]},r))}),e.jsxs("div",{className:"chat-input-container",children:[e.jsx("input",{type:"file",ref:_e,accept:"image/jpeg,image/png,image/webp",multiple:!0,onChange:bt,style:{display:"none"}}),e.jsx("button",{className:"chat-image-btn",onClick:()=>_e.current?.click(),disabled:ue||O.length>=3,title:"ÃncarcÄƒ imagine (max 3MB)",children:"ğŸ“·"}),e.jsx("button",{className:"chat-voice-btn",onClick:xt,disabled:$e,title:"ComandÄƒ vocalÄƒ",children:$e?"ğŸ”´":"ğŸ¤"}),e.jsx("input",{type:"text",placeholder:"Scrie un mesaj sau foloseÈ™te vocea...",className:"chat-input",value:me,onChange:t=>ze(t.target.value),onKeyPress:t=>t.key==="Enter"&&Ue(),disabled:ue}),e.jsx("button",{className:"chat-send",onClick:Ue,disabled:ue||!me.trim()&&O.length===0,children:"â¤"})]})]}),e.jsx("button",{className:"ai-chat-button",onClick:()=>T(!M),children:"ğŸ¤–"}),Xe&&N&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem"},children:e.jsxs("div",{style:{background:"#1e293b",borderRadius:"1rem",padding:"2rem",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700"},children:Q[N.id]?"ğŸ‘ï¸ Vezi/EditeazÄƒ CorecÈ›ia":"âœï¸ CorecteazÄƒ RÄƒspuns AI"}),Q[N.id]&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#10b981",marginTop:"0.25rem"},children:["âœ“ Corectat la ",Q[N.id].correctedAt?.toLocaleString("ro-RO")]})]}),e.jsx("button",{onClick:()=>oe(!1),style:{background:"transparent",border:"none",color:"#94a3b8",fontSize:"1.5rem",cursor:"pointer",padding:"0.5rem"},children:"âœ•"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"â“ Ãntrebarea User-ului:"}),e.jsx("div",{style:{background:"#0f172a",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #1e293b",color:"#e2e8f0"},children:N.userMessage})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ¤– RÄƒspunsul AI (Original):"}),e.jsx("div",{style:{background:"#0f172a",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #1e293b",color:"#cbd5e1"},children:N.aiResponse})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"âœ… RÄƒspunsul Corect (Tu scrii):"}),e.jsx("textarea",{value:P,onChange:t=>ce(t.target.value),placeholder:"Scrie rÄƒspunsul corect aici...",style:{width:"100%",minHeight:"120px",background:"#0f172a",border:"1px solid #334155",borderRadius:"0.5rem",padding:"1rem",color:"#e2e8f0",fontSize:"1rem",fontFamily:"inherit",resize:"vertical"}})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ“ Prompt pentru AI (OpÈ›ional - pentru Ã®nvÄƒÈ›are):"}),e.jsx("textarea",{value:Ce,onChange:t=>le(t.target.value),placeholder:"Ex: CÃ¢nd user Ã®ntreabÄƒ despre weekend, explicÄƒ-i cum sÄƒ seteze disponibilitatea Ã®n app...",style:{width:"100%",minHeight:"80px",background:"#0f172a",border:"1px solid #334155",borderRadius:"0.5rem",padding:"1rem",color:"#e2e8f0",fontSize:"0.875rem",fontFamily:"inherit",resize:"vertical"}}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"ğŸ’¡ Acest prompt va fi salvat Ã®n Firebase È™i AI va Ã®nvÄƒÈ›a din el"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>oe(!1),disabled:H,style:{padding:"0.75rem 1.5rem",background:"#334155",color:"white",border:"none",borderRadius:"0.5rem",cursor:H?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:"âŒ AnuleazÄƒ"}),e.jsx("button",{onClick:ot,disabled:H||!P.trim(),style:{padding:"0.75rem 1.5rem",background:H||!P.trim()?"#64748b":"#10b981",color:"white",border:"none",borderRadius:"0.5rem",cursor:H||!P.trim()?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:H?"â³ Se salveazÄƒ...":"ğŸ’¾ SalveazÄƒ CorecÈ›ie"})]})]})})]}),_&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"2rem"},children:e.jsxs("div",{style:{background:"#1f2937",borderRadius:"12px",width:"100%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid #374151",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#374151"},children:[e.jsx("h3",{style:{margin:0,color:"white",fontSize:"1.25rem"},children:"ğŸ’¬ Chat ClienÈ›i"}),e.jsx("button",{onClick:()=>V(!1),style:{background:"transparent",border:"none",color:"#9ca3af",fontSize:"1.5rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:"âœ•"})]}),e.jsx("div",{style:{flex:1,overflow:"hidden"},children:e.jsx(Wt,{})})]})})]})}export{Gt as default};

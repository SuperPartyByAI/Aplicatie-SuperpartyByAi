import{e as C,j as r,a as T}from"./index-go8NIyy-.js";import{b as i,u as z}from"./react-vendor-BCFq-EBz.js";import"./index-CG1tBJBN.js";import"./firebase-CZFSqwcK.js";function x(n,o,s={}){const c={message:o,...s,service:"kyc-app-frontend",environment:"production",timestamp:new Date().toISOString()};console[n](`[${n.toUpperCase()}]`,o,c)}const E={logtail:null,info:(n,o)=>x("info",n,o),warn:(n,o)=>x("warn",n,o),error:(n,o)=>x("error",n,o),debug:(n,o)=>x("log",n,o)},f="https://whats-upp-production.up.railway.app";function R(){const[n,o]=i.useState([]),[s,c]=i.useState(!0),[k,m]=i.useState(!1),[g,b]=i.useState(""),[p,h]=i.useState(""),[W,w]=i.useState(null),[y,u]=i.useState("");i.useEffect(()=>{d();const e=setInterval(()=>{d()},3e3);return()=>clearInterval(e)},[]);const d=async()=>{try{const t=await(await C({op:"http.client",name:"GET /api/whatsapp/accounts"},()=>fetch(`${f}/api/whatsapp/accounts`))).json();console.log("ğŸ“± WhatsApp accounts loaded:",t.accounts),E.info("WhatsApp accounts loaded",{count:t.accounts?.length||0}),t.success&&(o(t.accounts),t.accounts.forEach(a=>{console.log(`Account ${a.name}: status=${a.status}, hasQR=${!!a.qrCode}`)}))}catch(e){console.error("âŒ Error loading accounts:",e)}finally{c(!1)}},S=async()=>{if(!g.trim()){alert("Introdu un nume pentru cont!");return}try{console.log("ğŸ”„ Adding account:",g,"phone:",p);const e=await fetch(`${f}/api/whatsapp/add-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g,phone:p||void 0})});if(console.log("ğŸ“¡ Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(console.log("ğŸ“¦ Response data:",t),t.success)m(!1),b(""),h(""),d(),alert("âœ… Cont adÄƒugat! AÈ™teaptÄƒ QR code"+(p?" È™i pairing code":"")+"...");else throw new Error(t.error||"Eroare necunoscutÄƒ")}catch(e){console.error("âŒ Error adding account:",e),alert("âŒ Eroare la adÄƒugarea contului: "+e.message)}},j=async e=>{if(!y.trim()){alert("âŒ Numele nu poate fi gol");return}try{const a=await(await fetch(`${f}/api/whatsapp/accounts/${e}/name`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:y.trim()})})).json();if(a.success)console.log("âœ… Account name updated:",a.account),w(null),u(""),d();else throw new Error(a.error||"Eroare necunoscutÄƒ")}catch(t){console.error("âŒ Error updating account name:",t),alert("âŒ Eroare la actualizarea numelui: "+t.message)}},A=async e=>{if(confirm("Sigur vrei sÄƒ deconectezi acest cont?"))try{console.log("ğŸ”Œ Disconnecting account:",e);const t=await fetch(`${f}/api/whatsapp/accounts/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();if(console.log("ğŸ“¦ Disconnect response:",a),a.success)d(),alert("âœ… Cont deconectat cu succes!");else throw new Error(a.error||"Eroare necunoscutÄƒ")}catch(t){console.error("âŒ Error disconnecting account:",t),alert("âŒ Eroare la deconectare: "+t.message)}},l=e=>{switch(e){case"connected":return"#10b981";case"qr_ready":case"awaiting_scan":return"#f59e0b";case"connecting":case"reconnecting":return"#3b82f6";case"disconnected":case"logged_out":return"#ef4444";default:return"#6b7280"}},v=e=>{switch(e){case"connected":return"âœ… Conectat";case"qr_ready":return"ğŸ“± QR Gata - ScaneazÄƒ!";case"awaiting_scan":return"â³ AÈ™teaptÄƒ Scanare QR";case"connecting":return"ğŸ”„ Se conecteazÄƒ...";case"reconnecting":return"ğŸ”„ Reconectare...";case"disconnected":return"â¸ï¸ Deconectat";case"logged_out":return"ğŸšª Delogat";case"needs_qr":return"ğŸ”‘ NecesitÄƒ QR";default:return`âš ï¸ ${e||"Necunoscut"}`}};return s?r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#9ca3af"},children:"Se Ã®ncarcÄƒ..."}):r.jsxs("div",{style:{padding:"1rem",maxWidth:"100%",overflowX:"hidden"},children:[r.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",justifyContent:"space-between",alignItems:window.innerWidth<768?"stretch":"center",marginBottom:"1.5rem",gap:"1rem"},children:[r.jsxs("h2",{style:{margin:0,background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.5rem":"2rem",fontWeight:"800",textShadow:"0 0 20px rgba(0, 245, 255, 0.5)"},children:["ğŸ“± Conturi WhatsApp (",n.length,")"]}),r.jsx("button",{onClick:()=>m(!0),style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",color:"#0a0a0a",border:"2px solid #00f5ff",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:window.innerWidth<768?"1rem":"1.1rem",boxShadow:"0 0 20px rgba(0, 245, 255, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease",width:window.innerWidth<768?"100%":"auto"},onMouseOver:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.8), inset 0 0 15px rgba(255, 255, 255, 0.3)"},onMouseOut:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)"},children:"+ AdaugÄƒ Cont"})]}),n.length===0?r.jsxs("div",{style:{padding:"3rem",textAlign:"center",background:"rgba(0, 245, 255, 0.05)",border:"2px solid rgba(0, 245, 255, 0.3)",borderRadius:"16px",color:"#00f5ff",boxShadow:"0 0 30px rgba(0, 245, 255, 0.2)"},children:[r.jsx("p",{style:{fontSize:"1.125rem",marginBottom:"0.5rem",fontWeight:"600"},children:"ğŸ“­ Niciun cont WhatsApp"}),r.jsx("p",{style:{color:"#00ff88"},children:"AdaugÄƒ primul cont pentru a Ã®ncepe!"})]}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:n.map(e=>r.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(0, 10, 20, 0.9) 0%, rgba(0, 20, 40, 0.9) 100%)",borderRadius:"16px",padding:"1.5rem",border:"2px solid rgba(0, 245, 255, 0.3)",boxShadow:"0 0 20px rgba(0, 245, 255, 0.2), inset 0 0 20px rgba(0, 245, 255, 0.05)",transition:"all 0.3s ease"},onMouseOver:t=>{t.currentTarget.style.borderColor="rgba(0, 245, 255, 0.6)",t.currentTarget.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.4), inset 0 0 30px rgba(0, 245, 255, 0.1)",t.currentTarget.style.transform="translateY(-5px)"},onMouseOut:t=>{t.currentTarget.style.borderColor="rgba(0, 245, 255, 0.3)",t.currentTarget.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.2), inset 0 0 20px rgba(0, 245, 255, 0.05)",t.currentTarget.style.transform="translateY(0)"},children:[r.jsx("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",justifyContent:"space-between",alignItems:(window.innerWidth<768,"start"),marginBottom:"1rem",gap:"0.5rem"},children:r.jsxs("div",{style:{width:"100%"},children:[r.jsx("h3",{style:{margin:"0 0 0.5rem 0",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.1rem":"1.3rem",fontWeight:"700"},children:W===e.id?r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("input",{type:"text",value:y,onChange:t=>u(t.target.value),onKeyPress:t=>t.key==="Enter"&&j(e.id),style:{padding:"0.5rem",borderRadius:"6px",border:"2px solid #00ff88",background:"#1a1a2e",color:"white",fontSize:"1rem",outline:"none"},autoFocus:!0}),r.jsx("button",{onClick:()=>j(e.id),style:{padding:"0.5rem 1rem",background:"#00ff88",color:"#0f0f23",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"âœ“"}),r.jsx("button",{onClick:()=>{w(null),u("")},style:{padding:"0.5rem 1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"600"},children:"âœ•"})]}):r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("span",{children:e.name}),r.jsx("button",{onClick:()=>{w(e.id),u(e.name)},style:{padding:"0.25rem 0.5rem",background:"transparent",color:"#00ff88",border:"1px solid #00ff88",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem"},children:"âœï¸ Edit"})]})}),r.jsx("div",{style:{display:"inline-block",padding:"0.4rem 1rem",background:`linear-gradient(135deg, ${l(e.status)}40 0%, ${l(e.status)}20 100%)`,color:l(e.status),border:`2px solid ${l(e.status)}`,borderRadius:"8px",fontSize:"0.875rem",fontWeight:"700",boxShadow:`0 0 15px ${l(e.status)}40`,textTransform:"uppercase",letterSpacing:"0.5px"},children:v(e.status)})]})}),e.phone&&r.jsxs("p",{style:{margin:"0.5rem 0",color:"#00ff88",fontSize:"0.875rem",fontWeight:"500",textShadow:"0 0 10px rgba(0, 255, 136, 0.5)"},children:["ğŸ“ ",e.phone]}),e.qrCode&&(e.status==="qr_ready"||e.status==="awaiting_scan"||e.status==="reconnecting"||e.status==="needs_qr"||e.status==="logged_out")&&r.jsxs("div",{style:{marginTop:"1rem",textAlign:"center",padding:"1rem",background:"rgba(255, 165, 0, 0.05)",border:"2px solid rgba(255, 165, 0, 0.3)",borderRadius:"12px",boxShadow:"0 0 20px rgba(255, 165, 0, 0.2)"},children:[r.jsx("p",{style:{color:"#ffa500",fontSize:"1rem",marginBottom:"1rem",fontWeight:"700",textShadow:"0 0 10px rgba(255, 165, 0, 0.5)",textTransform:"uppercase",letterSpacing:"1px"},children:"ğŸ“± ScaneazÄƒ cu WhatsApp"}),r.jsx("img",{src:e.qrCode,alt:"QR Code",style:{width:window.innerWidth<768?"200px":"250px",height:window.innerWidth<768?"200px":"250px",margin:"0 auto",border:"3px solid #ffa500",borderRadius:"12px",padding:"0.5rem",background:"white",boxShadow:"0 0 30px rgba(255, 165, 0, 0.4)"}}),r.jsx("p",{style:{color:"#00ff88",fontSize:"0.75rem",marginTop:"0.75rem",fontWeight:"500"},children:"WhatsApp â†’ Settings â†’ Linked Devices â†’ Link a Device"}),e.pairingCode&&r.jsxs("div",{style:{marginTop:"1rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(138, 43, 226, 0.1) 0%, rgba(75, 0, 130, 0.1) 100%)",border:"2px solid rgba(138, 43, 226, 0.4)",borderRadius:"12px",boxShadow:"0 0 20px rgba(138, 43, 226, 0.3)"},children:[r.jsx("p",{style:{color:"#ba55d3",fontSize:"0.85rem",marginBottom:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px"},children:"SAU foloseÈ™te codul:"}),r.jsx("p",{style:{color:"#00f5ff",fontSize:window.innerWidth<768?"1.8rem":"2rem",fontWeight:"800",letterSpacing:"0.3em",margin:"1rem 0",fontFamily:"monospace",textShadow:"0 0 20px rgba(0, 245, 255, 0.6)",textAlign:"center"},children:e.pairingCode}),r.jsx("p",{style:{color:"#00ff88",fontSize:"0.75rem",marginTop:"0.75rem",fontWeight:"500"},children:"WhatsApp â†’ Settings â†’ Linked Devices â†’ Link with phone number"})]})]}),e.status==="connected"&&r.jsxs("div",{style:{marginTop:"1rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(0, 245, 255, 0.1) 100%)",border:"2px solid rgba(0, 255, 136, 0.4)",borderRadius:"12px",textAlign:"center",boxShadow:"0 0 30px rgba(0, 255, 136, 0.2)"},children:[r.jsx("p",{style:{color:"#00ff88",margin:"0 0 1rem 0",fontWeight:"700",fontSize:"1.1rem",textShadow:"0 0 15px rgba(0, 255, 136, 0.6)",textTransform:"uppercase",letterSpacing:"1px"},children:"âœ… Cont Activ"}),r.jsx("button",{onClick:()=>A(e.id),style:{padding:"1rem 1.5rem",background:"linear-gradient(135deg, #ff0080 0%, #ff0040 100%)",color:"white",border:"2px solid #ff0080",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:window.innerWidth<768?"0.95rem":"1rem",display:"block",margin:"0 auto",width:"100%",maxWidth:window.innerWidth<768?"100%":"250px",boxShadow:"0 0 20px rgba(255, 0, 128, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"1px"},onMouseOver:t=>{t.target.style.transform="scale(1.05)",t.target.style.boxShadow="0 0 30px rgba(255, 0, 128, 0.7), inset 0 0 15px rgba(255, 255, 255, 0.3)"},onMouseOut:t=>{t.target.style.transform="scale(1)",t.target.style.boxShadow="0 0 20px rgba(255, 0, 128, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2)"},children:"ğŸ”Œ DeconecteazÄƒ"})]})]},e.id))}),k&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:r.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(0, 10, 20, 0.95) 0%, rgba(0, 20, 40, 0.95) 100%)",border:"2px solid rgba(0, 245, 255, 0.4)",borderRadius:"16px",padding:window.innerWidth<768?"1.5rem":"2rem",maxWidth:"450px",width:"100%",boxShadow:"0 0 40px rgba(0, 245, 255, 0.3), inset 0 0 30px rgba(0, 245, 255, 0.05)"},children:[r.jsx("h3",{style:{margin:"0 0 1.5rem 0",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.3rem":"1.5rem",fontWeight:"800",textAlign:"center"},children:"â• AdaugÄƒ Cont WhatsApp"}),r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#00f5ff",fontSize:"0.875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Nume cont:"}),r.jsx("input",{type:"text",value:g,onChange:e=>b(e.target.value),placeholder:"Ex: SuperParty Account 1",style:{width:"100%",padding:"0.75rem",background:"rgba(0, 245, 255, 0.05)",border:"2px solid rgba(0, 245, 255, 0.3)",borderRadius:"8px",color:"#00f5ff",marginBottom:"1rem",fontSize:"1rem",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor="rgba(0, 245, 255, 0.6)",e.target.style.boxShadow="0 0 15px rgba(0, 245, 255, 0.3)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 245, 255, 0.3)",e.target.style.boxShadow="none"}}),r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#00ff88",fontSize:"0.875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"NumÄƒr telefon (opÈ›ional):"}),r.jsx("input",{type:"tel",value:p,onChange:e=>h(e.target.value),placeholder:"Ex: +40712345678",style:{width:"100%",padding:"0.75rem",background:"rgba(0, 255, 136, 0.05)",border:"2px solid rgba(0, 255, 136, 0.3)",borderRadius:"8px",color:"#00ff88",marginBottom:"0.5rem",fontSize:"1rem",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor="rgba(0, 255, 136, 0.6)",e.target.style.boxShadow="0 0 15px rgba(0, 255, 136, 0.3)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 255, 136, 0.3)",e.target.style.boxShadow="none"},onKeyPress:e=>e.key==="Enter"&&S()}),r.jsx("p",{style:{color:"#ba55d3",fontSize:"0.75rem",marginBottom:"1.5rem",marginTop:"0.5rem",fontWeight:"500"},children:"ğŸ’¡ DacÄƒ introduci numÄƒrul, vei primi È™i un cod de 8 cifre"}),r.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem"},children:[r.jsx("button",{onClick:()=>{m(!1),b(""),h("")},style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, rgba(255, 0, 128, 0.2) 0%, rgba(255, 0, 64, 0.2) 100%)",color:"#ff0080",border:"2px solid rgba(255, 0, 128, 0.4)",borderRadius:"10px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.3s ease"},onMouseOver:e=>{e.target.style.background="linear-gradient(135deg, rgba(255, 0, 128, 0.3) 0%, rgba(255, 0, 64, 0.3) 100%)",e.target.style.boxShadow="0 0 20px rgba(255, 0, 128, 0.4)"},onMouseOut:e=>{e.target.style.background="linear-gradient(135deg, rgba(255, 0, 128, 0.2) 0%, rgba(255, 0, 64, 0.2) 100%)",e.target.style.boxShadow="none"},children:"âœ– AnuleazÄƒ"}),r.jsx("button",{onClick:S,style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",color:"#0a0a0a",border:"2px solid #00f5ff",borderRadius:"10px",cursor:"pointer",fontWeight:"800",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"1px",boxShadow:"0 0 20px rgba(0, 245, 255, 0.5)",transition:"all 0.3s ease"},onMouseOver:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.7)"},onMouseOut:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.5)"},children:"âœ“ AdaugÄƒ"})]})]})})]})}function O(){const n=z(),[o,s]=i.useState(!0);return i.useEffect(()=>{if(!T.currentUser){n("/");return}s(!1)},[n]),o?r.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:r.jsx("p",{children:"Se Ã®ncarcÄƒ..."})}):r.jsxs("div",{style:{padding:"1rem",minHeight:"100vh",background:"#111827"},children:[r.jsx("div",{style:{marginBottom:"1rem"},children:r.jsx("button",{onClick:()=>n("/home"),style:{padding:"0.5rem 1rem",background:"#374151",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"â† Ãnapoi"})}),r.jsx("h1",{style:{color:"white",marginBottom:"1rem"},children:"âš™ï¸ Gestionare Conturi WhatsApp"}),r.jsx("div",{style:{background:"#1f2937",borderRadius:"8px",padding:"1rem"},children:r.jsx(R,{})})]})}export{O as default};

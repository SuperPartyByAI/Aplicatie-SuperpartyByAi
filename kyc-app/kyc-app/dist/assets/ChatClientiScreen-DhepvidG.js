import{e as z,j as t,a as R}from"./index-DjcvNE5O.js";import{b as i,u as E}from"./react-vendor-BCFq-EBz.js";import{l as D}from"./index-CG1tBJBN.js";import"./firebase-CZFSqwcK.js";function k(o,s,a={}){const g={message:s,...a,service:"kyc-app-frontend",environment:"production",timestamp:new Date().toISOString()};console[o](`[${o.toUpperCase()}]`,s,g)}const M={logtail:null,info:(o,s)=>k("info",o,s),warn:(o,s)=>k("warn",o,s),error:(o,s)=>k("error",o,s),debug:(o,s)=>k("log",o,s)},A="https://whats-upp-production.up.railway.app";function N(){const[o,s]=i.useState([]),[a,g]=i.useState(!0),[f,u]=i.useState(!1),[d,c]=i.useState(""),[m,h]=i.useState("");i.useEffect(()=>{x();const e=setInterval(()=>{x()},3e3);return()=>clearInterval(e)},[]);const x=async()=>{try{const n=await(await z({op:"http.client",name:"GET /api/whatsapp/accounts"},()=>fetch(`${A}/api/whatsapp/accounts`))).json();console.log("ğŸ“± WhatsApp accounts loaded:",n.accounts),M.info("WhatsApp accounts loaded",{count:n.accounts?.length||0}),n.success&&(s(n.accounts),n.accounts.forEach(l=>{console.log(`Account ${l.name}: status=${l.status}, hasQR=${!!l.qrCode}`)}))}catch(e){console.error("âŒ Error loading accounts:",e)}finally{g(!1)}},S=async()=>{if(!d.trim()){alert("Introdu un nume pentru cont!");return}try{console.log("ğŸ”„ Adding account:",d,"phone:",m);const e=await fetch(`${A}/api/whatsapp/add-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,phone:m||void 0})});if(console.log("ğŸ“¡ Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();if(console.log("ğŸ“¦ Response data:",n),n.success)u(!1),c(""),h(""),x(),alert("âœ… Cont adÄƒugat! AÈ™teaptÄƒ QR code"+(m?" È™i pairing code":"")+"...");else throw new Error(n.error||"Eroare necunoscutÄƒ")}catch(e){console.error("âŒ Error adding account:",e),alert("âŒ Eroare la adÄƒugarea contului: "+e.message)}},j=async e=>{if(confirm("Sigur vrei sÄƒ deconectezi acest cont?"))try{console.log("ğŸ”Œ Disconnecting account:",e);const n=await fetch(`${A}/api/whatsapp/accounts/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const l=await n.json();if(console.log("ğŸ“¦ Disconnect response:",l),l.success)x(),alert("âœ… Cont deconectat cu succes!");else throw new Error(l.error||"Eroare necunoscutÄƒ")}catch(n){console.error("âŒ Error disconnecting account:",n),alert("âŒ Eroare la deconectare: "+n.message)}},b=e=>{switch(e){case"connected":return"#10b981";case"qr_ready":return"#f59e0b";case"connecting":return"#3b82f6";default:return"#6b7280"}},r=e=>{switch(e){case"connected":return"âœ… Conectat";case"qr_ready":return"ğŸ“± ScaneazÄƒ QR";case"connecting":return"ğŸ”„ Se conecteazÄƒ...";default:return"â¸ï¸ Deconectat"}};return a?t.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#9ca3af"},children:"Se Ã®ncarcÄƒ..."}):t.jsxs("div",{style:{padding:"1rem",maxWidth:"100%",overflowX:"hidden"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",justifyContent:"space-between",alignItems:window.innerWidth<768?"stretch":"center",marginBottom:"1.5rem",gap:"1rem"},children:[t.jsxs("h2",{style:{margin:0,background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.5rem":"2rem",fontWeight:"800",textShadow:"0 0 20px rgba(0, 245, 255, 0.5)"},children:["ğŸ“± Conturi WhatsApp (",o.length,")"]}),t.jsx("button",{onClick:()=>u(!0),style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",color:"#0a0a0a",border:"2px solid #00f5ff",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:window.innerWidth<768?"1rem":"1.1rem",boxShadow:"0 0 20px rgba(0, 245, 255, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease",width:window.innerWidth<768?"100%":"auto"},onMouseOver:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.8), inset 0 0 15px rgba(255, 255, 255, 0.3)"},onMouseOut:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)"},children:"+ AdaugÄƒ Cont"})]}),o.length===0?t.jsxs("div",{style:{padding:"3rem",textAlign:"center",background:"rgba(0, 245, 255, 0.05)",border:"2px solid rgba(0, 245, 255, 0.3)",borderRadius:"16px",color:"#00f5ff",boxShadow:"0 0 30px rgba(0, 245, 255, 0.2)"},children:[t.jsx("p",{style:{fontSize:"1.125rem",marginBottom:"0.5rem",fontWeight:"600"},children:"ğŸ“­ Niciun cont WhatsApp"}),t.jsx("p",{style:{color:"#00ff88"},children:"AdaugÄƒ primul cont pentru a Ã®ncepe!"})]}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:o.map(e=>t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(0, 10, 20, 0.9) 0%, rgba(0, 20, 40, 0.9) 100%)",borderRadius:"16px",padding:"1.5rem",border:"2px solid rgba(0, 245, 255, 0.3)",boxShadow:"0 0 20px rgba(0, 245, 255, 0.2), inset 0 0 20px rgba(0, 245, 255, 0.05)",transition:"all 0.3s ease"},onMouseOver:n=>{n.currentTarget.style.borderColor="rgba(0, 245, 255, 0.6)",n.currentTarget.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.4), inset 0 0 30px rgba(0, 245, 255, 0.1)",n.currentTarget.style.transform="translateY(-5px)"},onMouseOut:n=>{n.currentTarget.style.borderColor="rgba(0, 245, 255, 0.3)",n.currentTarget.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.2), inset 0 0 20px rgba(0, 245, 255, 0.05)",n.currentTarget.style.transform="translateY(0)"},children:[t.jsx("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",justifyContent:"space-between",alignItems:(window.innerWidth<768,"start"),marginBottom:"1rem",gap:"0.5rem"},children:t.jsxs("div",{style:{width:"100%"},children:[t.jsx("h3",{style:{margin:"0 0 0.5rem 0",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.1rem":"1.3rem",fontWeight:"700"},children:e.name}),t.jsx("div",{style:{display:"inline-block",padding:"0.4rem 1rem",background:`linear-gradient(135deg, ${b(e.status)}40 0%, ${b(e.status)}20 100%)`,color:b(e.status),border:`2px solid ${b(e.status)}`,borderRadius:"8px",fontSize:"0.875rem",fontWeight:"700",boxShadow:`0 0 15px ${b(e.status)}40`,textTransform:"uppercase",letterSpacing:"0.5px"},children:r(e.status)})]})}),e.phone&&t.jsxs("p",{style:{margin:"0.5rem 0",color:"#00ff88",fontSize:"0.875rem",fontWeight:"500",textShadow:"0 0 10px rgba(0, 255, 136, 0.5)"},children:["ğŸ“ ",e.phone]}),e.qrCode&&(e.status==="qr_ready"||e.status==="reconnecting"||e.status==="logged_out")&&t.jsxs("div",{style:{marginTop:"1rem",textAlign:"center",padding:"1rem",background:"rgba(255, 165, 0, 0.05)",border:"2px solid rgba(255, 165, 0, 0.3)",borderRadius:"12px",boxShadow:"0 0 20px rgba(255, 165, 0, 0.2)"},children:[t.jsx("p",{style:{color:"#ffa500",fontSize:"1rem",marginBottom:"1rem",fontWeight:"700",textShadow:"0 0 10px rgba(255, 165, 0, 0.5)",textTransform:"uppercase",letterSpacing:"1px"},children:"ğŸ“± ScaneazÄƒ cu WhatsApp"}),t.jsx("img",{src:e.qrCode,alt:"QR Code",style:{width:window.innerWidth<768?"200px":"250px",height:window.innerWidth<768?"200px":"250px",margin:"0 auto",border:"3px solid #ffa500",borderRadius:"12px",padding:"0.5rem",background:"white",boxShadow:"0 0 30px rgba(255, 165, 0, 0.4)"}}),t.jsx("p",{style:{color:"#00ff88",fontSize:"0.75rem",marginTop:"0.75rem",fontWeight:"500"},children:"WhatsApp â†’ Settings â†’ Linked Devices â†’ Link a Device"}),e.pairingCode&&t.jsxs("div",{style:{marginTop:"1rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(138, 43, 226, 0.1) 0%, rgba(75, 0, 130, 0.1) 100%)",border:"2px solid rgba(138, 43, 226, 0.4)",borderRadius:"12px",boxShadow:"0 0 20px rgba(138, 43, 226, 0.3)"},children:[t.jsx("p",{style:{color:"#ba55d3",fontSize:"0.85rem",marginBottom:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px"},children:"SAU foloseÈ™te codul:"}),t.jsx("p",{style:{color:"#00f5ff",fontSize:window.innerWidth<768?"1.8rem":"2rem",fontWeight:"800",letterSpacing:"0.3em",margin:"1rem 0",fontFamily:"monospace",textShadow:"0 0 20px rgba(0, 245, 255, 0.6)",textAlign:"center"},children:e.pairingCode}),t.jsx("p",{style:{color:"#00ff88",fontSize:"0.75rem",marginTop:"0.75rem",fontWeight:"500"},children:"WhatsApp â†’ Settings â†’ Linked Devices â†’ Link with phone number"})]})]}),e.status==="connected"&&t.jsxs("div",{style:{marginTop:"1rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(0, 245, 255, 0.1) 100%)",border:"2px solid rgba(0, 255, 136, 0.4)",borderRadius:"12px",textAlign:"center",boxShadow:"0 0 30px rgba(0, 255, 136, 0.2)"},children:[t.jsx("p",{style:{color:"#00ff88",margin:"0 0 1rem 0",fontWeight:"700",fontSize:"1.1rem",textShadow:"0 0 15px rgba(0, 255, 136, 0.6)",textTransform:"uppercase",letterSpacing:"1px"},children:"âœ… Cont Activ"}),t.jsx("button",{onClick:()=>j(e.id),style:{padding:"1rem 1.5rem",background:"linear-gradient(135deg, #ff0080 0%, #ff0040 100%)",color:"white",border:"2px solid #ff0080",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:window.innerWidth<768?"0.95rem":"1rem",display:"block",margin:"0 auto",width:"100%",maxWidth:window.innerWidth<768?"100%":"250px",boxShadow:"0 0 20px rgba(255, 0, 128, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"1px"},onMouseOver:n=>{n.target.style.transform="scale(1.05)",n.target.style.boxShadow="0 0 30px rgba(255, 0, 128, 0.7), inset 0 0 15px rgba(255, 255, 255, 0.3)"},onMouseOut:n=>{n.target.style.transform="scale(1)",n.target.style.boxShadow="0 0 20px rgba(255, 0, 128, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2)"},children:"ğŸ”Œ DeconecteazÄƒ"})]})]},e.id))}),f&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(0, 10, 20, 0.95) 0%, rgba(0, 20, 40, 0.95) 100%)",border:"2px solid rgba(0, 245, 255, 0.4)",borderRadius:"16px",padding:window.innerWidth<768?"1.5rem":"2rem",maxWidth:"450px",width:"100%",boxShadow:"0 0 40px rgba(0, 245, 255, 0.3), inset 0 0 30px rgba(0, 245, 255, 0.05)"},children:[t.jsx("h3",{style:{margin:"0 0 1.5rem 0",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.3rem":"1.5rem",fontWeight:"800",textAlign:"center"},children:"â• AdaugÄƒ Cont WhatsApp"}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#00f5ff",fontSize:"0.875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Nume cont:"}),t.jsx("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Ex: SuperParty Account 1",style:{width:"100%",padding:"0.75rem",background:"rgba(0, 245, 255, 0.05)",border:"2px solid rgba(0, 245, 255, 0.3)",borderRadius:"8px",color:"#00f5ff",marginBottom:"1rem",fontSize:"1rem",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor="rgba(0, 245, 255, 0.6)",e.target.style.boxShadow="0 0 15px rgba(0, 245, 255, 0.3)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 245, 255, 0.3)",e.target.style.boxShadow="none"}}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#00ff88",fontSize:"0.875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"NumÄƒr telefon (opÈ›ional):"}),t.jsx("input",{type:"tel",value:m,onChange:e=>h(e.target.value),placeholder:"Ex: +40712345678",style:{width:"100%",padding:"0.75rem",background:"rgba(0, 255, 136, 0.05)",border:"2px solid rgba(0, 255, 136, 0.3)",borderRadius:"8px",color:"#00ff88",marginBottom:"0.5rem",fontSize:"1rem",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor="rgba(0, 255, 136, 0.6)",e.target.style.boxShadow="0 0 15px rgba(0, 255, 136, 0.3)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 255, 136, 0.3)",e.target.style.boxShadow="none"},onKeyPress:e=>e.key==="Enter"&&S()}),t.jsx("p",{style:{color:"#ba55d3",fontSize:"0.75rem",marginBottom:"1.5rem",marginTop:"0.5rem",fontWeight:"500"},children:"ğŸ’¡ DacÄƒ introduci numÄƒrul, vei primi È™i un cod de 8 cifre"}),t.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem"},children:[t.jsx("button",{onClick:()=>{u(!1),c(""),h("")},style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, rgba(255, 0, 128, 0.2) 0%, rgba(255, 0, 64, 0.2) 100%)",color:"#ff0080",border:"2px solid rgba(255, 0, 128, 0.4)",borderRadius:"10px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.3s ease"},onMouseOver:e=>{e.target.style.background="linear-gradient(135deg, rgba(255, 0, 128, 0.3) 0%, rgba(255, 0, 64, 0.3) 100%)",e.target.style.boxShadow="0 0 20px rgba(255, 0, 128, 0.4)"},onMouseOut:e=>{e.target.style.background="linear-gradient(135deg, rgba(255, 0, 128, 0.2) 0%, rgba(255, 0, 64, 0.2) 100%)",e.target.style.boxShadow="none"},children:"âœ– AnuleazÄƒ"}),t.jsx("button",{onClick:S,style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",color:"#0a0a0a",border:"2px solid #00f5ff",borderRadius:"10px",cursor:"pointer",fontWeight:"800",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"1px",boxShadow:"0 0 20px rgba(0, 245, 255, 0.5)",transition:"all 0.3s ease"},onMouseOver:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.7)"},onMouseOut:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.5)"},children:"âœ“ AdaugÄƒ"})]})]})})]})}const w="https://whats-upp-production.up.railway.app",$=[{id:"1",name:"Ion Popescu",phone:"+40721234567",unreadCount:2},{id:"2",name:"Maria Ionescu",phone:"+40722345678",unreadCount:0},{id:"3",name:"Andrei Georgescu",phone:"+40723456789",unreadCount:1}],T=!1;function B(){const[o,s]=i.useState([]),[a,g]=i.useState(null),[f,u]=i.useState([]),[d,c]=i.useState(""),[m,h]=i.useState(!0);i.useEffect(()=>{x();const r=D(w);return r.on("connect",()=>{console.log("âœ… Connected to backend")}),r.on("whatsapp:message",e=>{console.log("ğŸ’¬ New message received:",e),a&&e.message.from===a.id&&u(n=>[...n,{id:e.message.id,text:e.message.body,fromClient:!e.message.fromMe,timestamp:e.message.timestamp*1e3}]),x()}),()=>r.disconnect()},[a]);const x=async()=>{try{if(!T){const e=await(await fetch(`${w}/api/whatsapp/accounts`)).json();if(!e.accounts||e.accounts.length===0){console.warn("No WhatsApp accounts found"),s([]);return}const n=e.accounts.find(y=>y.status==="connected");if(!n){console.warn("No connected WhatsApp account"),s([]);return}const C=await(await fetch(`${w}/api/whatsapp/messages?accountId=${n.id}&limit=50`)).json();if(C.success&&C.threads){const y=C.threads.map(p=>({id:p.id,name:p.clientJid.split("@")[0],phone:p.clientJid,unreadCount:0,lastMessage:p.messages?.[0]?.body||"",lastMessageAt:p.lastMessageAt}));s(y)}}}catch(r){console.error("Failed to load clients:",r),s($)}finally{h(!1)}},S=async r=>{try{if(!T){const l=(await(await fetch(`${w}/api/whatsapp/accounts`)).json()).accounts.find(p=>p.status==="connected");if(!l){console.error("No connected account");return}const y=await(await fetch(`${w}/api/whatsapp/messages?accountId=${l.id}&limit=50`)).json();if(y.success&&y.threads){const p=y.threads.find(W=>W.id===r);if(p&&p.messages){const W=p.messages.map(v=>({id:v.id,text:v.body,fromClient:v.direction==="inbound",timestamp:new Date(v.tsClient).getTime()})).reverse();u(W)}}}}catch(e){console.error("Failed to load messages:",e)}},j=async()=>{if(!(!d.trim()||!a))try{if(!T){const e=await(await fetch(`${w}/api/clients/${a.id}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:d})})).json();e.success&&(u(n=>[...n,e.message]),c(""))}}catch(r){console.error("Failed to send message:",r),alert("âŒ Eroare la trimiterea mesajului")}},b=r=>{g(r),S(r.id)};return m?t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",color:"#9ca3af"},children:t.jsx("div",{children:"Se Ã®ncarcÄƒ..."})}):t.jsxs("div",{style:{display:"flex",gap:"1rem",height:"600px",background:"#1f2937",borderRadius:"8px",overflow:"hidden"},children:[t.jsxs("div",{style:{width:"300px",borderRight:"1px solid #374151",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #374151",fontWeight:"600",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("span",{children:["ğŸ’¬ ClienÈ›i (",o.length,")"]}),t.jsx("button",{onClick:()=>{h(!0),x()},style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"4px",padding:"0.5rem",cursor:"pointer",fontSize:"1rem"},title:"ReÃ®mprospÄƒteazÄƒ lista",children:"ğŸ”„"})]}),t.jsx("div",{style:{flex:1,overflowY:"auto"},children:o.length===0?t.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#9ca3af"},children:t.jsx("p",{children:"Niciun client disponibil"})}):o.map(r=>t.jsxs("div",{onClick:()=>b(r),style:{padding:"1rem",background:a?.id===r.id?"#3b82f6":"transparent",borderBottom:"1px solid #374151",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>{a?.id!==r.id&&(e.currentTarget.style.background="#374151")},onMouseLeave:e=>{a?.id!==r.id&&(e.currentTarget.style.background="transparent")},children:[t.jsx("div",{style:{fontWeight:"600",color:"white",marginBottom:"0.25rem"},children:r.name}),t.jsx("div",{style:{fontSize:"0.875rem",color:a?.id===r.id?"#e0e7ff":"#9ca3af"},children:r.phone}),r.unreadCount>0&&t.jsxs("div",{style:{marginTop:"0.5rem",display:"inline-block",background:"#ef4444",color:"white",padding:"0.125rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"600"},children:[r.unreadCount," nou",r.unreadCount>1?"e":""]})]},r.id))})]}),t.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:a?t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #374151",background:"#374151"},children:[t.jsx("div",{style:{fontWeight:"600",fontSize:"1.125rem",color:"white"},children:a.name}),t.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af"},children:a.phone})]}),t.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:f.length===0?t.jsx("div",{style:{textAlign:"center",color:"#9ca3af",padding:"2rem"},children:"Niciun mesaj Ã®ncÄƒ"}):f.map((r,e)=>t.jsxs("div",{style:{alignSelf:r.fromClient?"flex-start":"flex-end",maxWidth:"70%"},children:[t.jsx("div",{style:{padding:"0.75rem",borderRadius:"8px",background:r.fromClient?"#374151":"#3b82f6",color:"white"},children:r.text}),t.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem",textAlign:r.fromClient?"left":"right"},children:new Date(r.timestamp).toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"})})]},e))}),t.jsxs("div",{style:{padding:"1rem",borderTop:"1px solid #374151",display:"flex",gap:"0.5rem"},children:[t.jsx("input",{type:"text",value:d,onChange:r=>c(r.target.value),onKeyPress:r=>r.key==="Enter"&&j(),placeholder:"Scrie un mesaj...",style:{flex:1,padding:"0.75rem",background:"#374151",border:"1px solid #4b5563",borderRadius:"8px",color:"white",fontSize:"1rem"}}),t.jsx("button",{onClick:j,disabled:!d.trim(),style:{padding:"0.75rem 1.5rem",background:d.trim()?"#3b82f6":"#4b5563",color:"white",border:"none",borderRadius:"8px",cursor:d.trim()?"pointer":"not-allowed",fontSize:"1rem",fontWeight:"600"},children:"Trimite"})]})]}):t.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",flexDirection:"column",gap:"1rem"},children:[t.jsx("div",{style:{fontSize:"4rem"},children:"ğŸ’¬"}),t.jsx("p",{style:{fontSize:"1.25rem"},children:"SelecteazÄƒ un client"}),t.jsx("p",{style:{fontSize:"0.875rem"},children:"pentru a vedea conversaÈ›ia"})]})})]})}function P(){const o=E(),a=R.currentUser?.email==="ursache.andrei1995@gmail.com",[g,f]=i.useState("accounts"),[u,d]=i.useState(null);return i.useEffect(()=>{if(!a){alert("â›” Acces interzis! Doar administratorul poate accesa aceastÄƒ paginÄƒ."),o("/home");return}fetch("https://us-central1-superparty-frontend.cloudfunctions.net/whatsappV4/api/whatsapp/accounts").then(c=>c.json()).then(c=>{const m=c.accounts?.find(h=>h.status==="connected");m&&(d(m),f("chat"))}).catch(c=>console.error("Error:",c))},[a,o]),a?t.jsxs("div",{className:"page-container",children:[t.jsx("div",{className:"page-header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[t.jsxs("div",{children:[t.jsx("h1",{children:"ğŸ’¬ Chat Clienti - WhatsApp"}),t.jsx("p",{className:"page-subtitle",children:g==="chat"?"ConversaÈ›ii cu clienÈ›ii":"Gestionare conturi WhatsApp"})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>f("chat"),className:g==="chat"?"btn-primary":"btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"ğŸ’¬ Chat"}),t.jsx("button",{onClick:()=>f("accounts"),className:g==="accounts"?"btn-primary":"btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"âš™ï¸ Accounts"})]}),t.jsx("button",{onClick:()=>o("/home"),className:"btn-secondary",children:"â† Ãnapoi"})]})]})}),g==="accounts"?t.jsx(N,{}):t.jsx(B,{})]}):null}export{P as default};

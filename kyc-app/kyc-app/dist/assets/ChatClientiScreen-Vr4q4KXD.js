import{e as j,j as t,a as W}from"./index-BRHz56d9.js";import{b as s,u as C}from"./react-vendor-BCFq-EBz.js";import"./index-CG1tBJBN.js";import{C as k}from"./ChatClientiRealtime-pcp1zas4.js";import"./firebase-CZFSqwcK.js";function f(n,o,d={}){const i={message:o,...d,service:"kyc-app-frontend",environment:"production",timestamp:new Date().toISOString()};console[n](`[${n.toUpperCase()}]`,o,i)}const A={logtail:null,info:(n,o)=>f("info",n,o),warn:(n,o)=>f("warn",n,o),error:(n,o)=>f("error",n,o),debug:(n,o)=>f("log",n,o)},b="https://whats-upp-production.up.railway.app";function v(){const[n,o]=s.useState([]),[d,i]=s.useState(!0),[p,u]=s.useState(!1),[g,a]=s.useState(""),[l,x]=s.useState("");s.useEffect(()=>{m();const e=setInterval(()=>{m()},3e3);return()=>clearInterval(e)},[]);const m=async()=>{try{const r=await(await j({op:"http.client",name:"GET /api/whatsapp/accounts"},()=>fetch(`${b}/api/whatsapp/accounts`))).json();console.log("ğŸ“± WhatsApp accounts loaded:",r.accounts),A.info("WhatsApp accounts loaded",{count:r.accounts?.length||0}),r.success&&(o(r.accounts),r.accounts.forEach(c=>{console.log(`Account ${c.name}: status=${c.status}, hasQR=${!!c.qrCode}`)}))}catch(e){console.error("âŒ Error loading accounts:",e)}finally{i(!1)}},w=async()=>{if(!g.trim()){alert("Introdu un nume pentru cont!");return}try{console.log("ğŸ”„ Adding account:",g,"phone:",l);const e=await fetch(`${b}/api/whatsapp/add-account`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g,phone:l||void 0})});if(console.log("ğŸ“¡ Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.json();if(console.log("ğŸ“¦ Response data:",r),r.success)u(!1),a(""),x(""),m(),alert("âœ… Cont adÄƒugat! AÈ™teaptÄƒ QR code"+(l?" È™i pairing code":"")+"...");else throw new Error(r.error||"Eroare necunoscutÄƒ")}catch(e){console.error("âŒ Error adding account:",e),alert("âŒ Eroare la adÄƒugarea contului: "+e.message)}},y=async e=>{if(confirm("Sigur vrei sÄƒ deconectezi acest cont?"))try{console.log("ğŸ”Œ Disconnecting account:",e);const r=await fetch(`${b}/api/whatsapp/accounts/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const c=await r.json();if(console.log("ğŸ“¦ Disconnect response:",c),c.success)m(),alert("âœ… Cont deconectat cu succes!");else throw new Error(c.error||"Eroare necunoscutÄƒ")}catch(r){console.error("âŒ Error disconnecting account:",r),alert("âŒ Eroare la deconectare: "+r.message)}},h=e=>{switch(e){case"connected":return"#10b981";case"qr_ready":return"#f59e0b";case"connecting":return"#3b82f6";default:return"#6b7280"}},S=e=>{switch(e){case"connected":return"âœ… Conectat";case"qr_ready":return"ğŸ“± ScaneazÄƒ QR";case"connecting":return"ğŸ”„ Se conecteazÄƒ...";default:return"â¸ï¸ Deconectat"}};return d?t.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#9ca3af"},children:"Se Ã®ncarcÄƒ..."}):t.jsxs("div",{style:{padding:"1rem",maxWidth:"100%",overflowX:"hidden"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",justifyContent:"space-between",alignItems:window.innerWidth<768?"stretch":"center",marginBottom:"1.5rem",gap:"1rem"},children:[t.jsxs("h2",{style:{margin:0,background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.5rem":"2rem",fontWeight:"800",textShadow:"0 0 20px rgba(0, 245, 255, 0.5)"},children:["ğŸ“± Conturi WhatsApp (",n.length,")"]}),t.jsx("button",{onClick:()=>u(!0),style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",color:"#0a0a0a",border:"2px solid #00f5ff",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:window.innerWidth<768?"1rem":"1.1rem",boxShadow:"0 0 20px rgba(0, 245, 255, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease",width:window.innerWidth<768?"100%":"auto"},onMouseOver:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.8), inset 0 0 15px rgba(255, 255, 255, 0.3)"},onMouseOut:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.6), inset 0 0 10px rgba(255, 255, 255, 0.2)"},children:"+ AdaugÄƒ Cont"})]}),n.length===0?t.jsxs("div",{style:{padding:"3rem",textAlign:"center",background:"rgba(0, 245, 255, 0.05)",border:"2px solid rgba(0, 245, 255, 0.3)",borderRadius:"16px",color:"#00f5ff",boxShadow:"0 0 30px rgba(0, 245, 255, 0.2)"},children:[t.jsx("p",{style:{fontSize:"1.125rem",marginBottom:"0.5rem",fontWeight:"600"},children:"ğŸ“­ Niciun cont WhatsApp"}),t.jsx("p",{style:{color:"#00ff88"},children:"AdaugÄƒ primul cont pentru a Ã®ncepe!"})]}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:window.innerWidth<768?"1fr":"repeat(auto-fill, minmax(350px, 1fr))",gap:"1.5rem"},children:n.map(e=>t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(0, 10, 20, 0.9) 0%, rgba(0, 20, 40, 0.9) 100%)",borderRadius:"16px",padding:"1.5rem",border:"2px solid rgba(0, 245, 255, 0.3)",boxShadow:"0 0 20px rgba(0, 245, 255, 0.2), inset 0 0 20px rgba(0, 245, 255, 0.05)",transition:"all 0.3s ease"},onMouseOver:r=>{r.currentTarget.style.borderColor="rgba(0, 245, 255, 0.6)",r.currentTarget.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.4), inset 0 0 30px rgba(0, 245, 255, 0.1)",r.currentTarget.style.transform="translateY(-5px)"},onMouseOut:r=>{r.currentTarget.style.borderColor="rgba(0, 245, 255, 0.3)",r.currentTarget.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.2), inset 0 0 20px rgba(0, 245, 255, 0.05)",r.currentTarget.style.transform="translateY(0)"},children:[t.jsx("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",justifyContent:"space-between",alignItems:(window.innerWidth<768,"start"),marginBottom:"1rem",gap:"0.5rem"},children:t.jsxs("div",{style:{width:"100%"},children:[t.jsx("h3",{style:{margin:"0 0 0.5rem 0",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.1rem":"1.3rem",fontWeight:"700"},children:e.name}),t.jsx("div",{style:{display:"inline-block",padding:"0.4rem 1rem",background:`linear-gradient(135deg, ${h(e.status)}40 0%, ${h(e.status)}20 100%)`,color:h(e.status),border:`2px solid ${h(e.status)}`,borderRadius:"8px",fontSize:"0.875rem",fontWeight:"700",boxShadow:`0 0 15px ${h(e.status)}40`,textTransform:"uppercase",letterSpacing:"0.5px"},children:S(e.status)})]})}),e.phone&&t.jsxs("p",{style:{margin:"0.5rem 0",color:"#00ff88",fontSize:"0.875rem",fontWeight:"500",textShadow:"0 0 10px rgba(0, 255, 136, 0.5)"},children:["ğŸ“ ",e.phone]}),e.qrCode&&(e.status==="qr_ready"||e.status==="reconnecting"||e.status==="logged_out")&&t.jsxs("div",{style:{marginTop:"1rem",textAlign:"center",padding:"1rem",background:"rgba(255, 165, 0, 0.05)",border:"2px solid rgba(255, 165, 0, 0.3)",borderRadius:"12px",boxShadow:"0 0 20px rgba(255, 165, 0, 0.2)"},children:[t.jsx("p",{style:{color:"#ffa500",fontSize:"1rem",marginBottom:"1rem",fontWeight:"700",textShadow:"0 0 10px rgba(255, 165, 0, 0.5)",textTransform:"uppercase",letterSpacing:"1px"},children:"ğŸ“± ScaneazÄƒ cu WhatsApp"}),t.jsx("img",{src:e.qrCode,alt:"QR Code",style:{width:window.innerWidth<768?"200px":"250px",height:window.innerWidth<768?"200px":"250px",margin:"0 auto",border:"3px solid #ffa500",borderRadius:"12px",padding:"0.5rem",background:"white",boxShadow:"0 0 30px rgba(255, 165, 0, 0.4)"}}),t.jsx("p",{style:{color:"#00ff88",fontSize:"0.75rem",marginTop:"0.75rem",fontWeight:"500"},children:"WhatsApp â†’ Settings â†’ Linked Devices â†’ Link a Device"}),e.pairingCode&&t.jsxs("div",{style:{marginTop:"1rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(138, 43, 226, 0.1) 0%, rgba(75, 0, 130, 0.1) 100%)",border:"2px solid rgba(138, 43, 226, 0.4)",borderRadius:"12px",boxShadow:"0 0 20px rgba(138, 43, 226, 0.3)"},children:[t.jsx("p",{style:{color:"#ba55d3",fontSize:"0.85rem",marginBottom:"0.75rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"1px"},children:"SAU foloseÈ™te codul:"}),t.jsx("p",{style:{color:"#00f5ff",fontSize:window.innerWidth<768?"1.8rem":"2rem",fontWeight:"800",letterSpacing:"0.3em",margin:"1rem 0",fontFamily:"monospace",textShadow:"0 0 20px rgba(0, 245, 255, 0.6)",textAlign:"center"},children:e.pairingCode}),t.jsx("p",{style:{color:"#00ff88",fontSize:"0.75rem",marginTop:"0.75rem",fontWeight:"500"},children:"WhatsApp â†’ Settings â†’ Linked Devices â†’ Link with phone number"})]})]}),e.status==="connected"&&t.jsxs("div",{style:{marginTop:"1rem",padding:"1.5rem",background:"linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(0, 245, 255, 0.1) 100%)",border:"2px solid rgba(0, 255, 136, 0.4)",borderRadius:"12px",textAlign:"center",boxShadow:"0 0 30px rgba(0, 255, 136, 0.2)"},children:[t.jsx("p",{style:{color:"#00ff88",margin:"0 0 1rem 0",fontWeight:"700",fontSize:"1.1rem",textShadow:"0 0 15px rgba(0, 255, 136, 0.6)",textTransform:"uppercase",letterSpacing:"1px"},children:"âœ… Cont Activ"}),t.jsx("button",{onClick:()=>y(e.id),style:{padding:"1rem 1.5rem",background:"linear-gradient(135deg, #ff0080 0%, #ff0040 100%)",color:"white",border:"2px solid #ff0080",borderRadius:"12px",cursor:"pointer",fontWeight:"700",fontSize:window.innerWidth<768?"0.95rem":"1rem",display:"block",margin:"0 auto",width:"100%",maxWidth:window.innerWidth<768?"100%":"250px",boxShadow:"0 0 20px rgba(255, 0, 128, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2)",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"1px"},onMouseOver:r=>{r.target.style.transform="scale(1.05)",r.target.style.boxShadow="0 0 30px rgba(255, 0, 128, 0.7), inset 0 0 15px rgba(255, 255, 255, 0.3)"},onMouseOut:r=>{r.target.style.transform="scale(1)",r.target.style.boxShadow="0 0 20px rgba(255, 0, 128, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2)"},children:"ğŸ”Œ DeconecteazÄƒ"})]})]},e.id))}),p&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(0, 10, 20, 0.95) 0%, rgba(0, 20, 40, 0.95) 100%)",border:"2px solid rgba(0, 245, 255, 0.4)",borderRadius:"16px",padding:window.innerWidth<768?"1.5rem":"2rem",maxWidth:"450px",width:"100%",boxShadow:"0 0 40px rgba(0, 245, 255, 0.3), inset 0 0 30px rgba(0, 245, 255, 0.05)"},children:[t.jsx("h3",{style:{margin:"0 0 1.5rem 0",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontSize:window.innerWidth<768?"1.3rem":"1.5rem",fontWeight:"800",textAlign:"center"},children:"â• AdaugÄƒ Cont WhatsApp"}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#00f5ff",fontSize:"0.875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Nume cont:"}),t.jsx("input",{type:"text",value:g,onChange:e=>a(e.target.value),placeholder:"Ex: SuperParty Account 1",style:{width:"100%",padding:"0.75rem",background:"rgba(0, 245, 255, 0.05)",border:"2px solid rgba(0, 245, 255, 0.3)",borderRadius:"8px",color:"#00f5ff",marginBottom:"1rem",fontSize:"1rem",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor="rgba(0, 245, 255, 0.6)",e.target.style.boxShadow="0 0 15px rgba(0, 245, 255, 0.3)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 245, 255, 0.3)",e.target.style.boxShadow="none"}}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#00ff88",fontSize:"0.875rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"NumÄƒr telefon (opÈ›ional):"}),t.jsx("input",{type:"tel",value:l,onChange:e=>x(e.target.value),placeholder:"Ex: +40712345678",style:{width:"100%",padding:"0.75rem",background:"rgba(0, 255, 136, 0.05)",border:"2px solid rgba(0, 255, 136, 0.3)",borderRadius:"8px",color:"#00ff88",marginBottom:"0.5rem",fontSize:"1rem",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor="rgba(0, 255, 136, 0.6)",e.target.style.boxShadow="0 0 15px rgba(0, 255, 136, 0.3)"},onBlur:e=>{e.target.style.borderColor="rgba(0, 255, 136, 0.3)",e.target.style.boxShadow="none"},onKeyPress:e=>e.key==="Enter"&&w()}),t.jsx("p",{style:{color:"#ba55d3",fontSize:"0.75rem",marginBottom:"1.5rem",marginTop:"0.5rem",fontWeight:"500"},children:"ğŸ’¡ DacÄƒ introduci numÄƒrul, vei primi È™i un cod de 8 cifre"}),t.jsxs("div",{style:{display:"flex",flexDirection:window.innerWidth<768?"column":"row",gap:"1rem"},children:[t.jsx("button",{onClick:()=>{u(!1),a(""),x("")},style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, rgba(255, 0, 128, 0.2) 0%, rgba(255, 0, 64, 0.2) 100%)",color:"#ff0080",border:"2px solid rgba(255, 0, 128, 0.4)",borderRadius:"10px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.3s ease"},onMouseOver:e=>{e.target.style.background="linear-gradient(135deg, rgba(255, 0, 128, 0.3) 0%, rgba(255, 0, 64, 0.3) 100%)",e.target.style.boxShadow="0 0 20px rgba(255, 0, 128, 0.4)"},onMouseOut:e=>{e.target.style.background="linear-gradient(135deg, rgba(255, 0, 128, 0.2) 0%, rgba(255, 0, 64, 0.2) 100%)",e.target.style.boxShadow="none"},children:"âœ– AnuleazÄƒ"}),t.jsx("button",{onClick:w,style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, #00f5ff 0%, #00ff88 100%)",color:"#0a0a0a",border:"2px solid #00f5ff",borderRadius:"10px",cursor:"pointer",fontWeight:"800",fontSize:"1rem",textTransform:"uppercase",letterSpacing:"1px",boxShadow:"0 0 20px rgba(0, 245, 255, 0.5)",transition:"all 0.3s ease"},onMouseOver:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 30px rgba(0, 245, 255, 0.7)"},onMouseOut:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="0 0 20px rgba(0, 245, 255, 0.5)"},children:"âœ“ AdaugÄƒ"})]})]})})]})}function D(){const n=C(),d=W.currentUser?.email==="ursache.andrei1995@gmail.com",[i,p]=s.useState("accounts"),[u,g]=s.useState(null);return s.useEffect(()=>{if(!d){alert("â›” Acces interzis! Doar administratorul poate accesa aceastÄƒ paginÄƒ."),n("/home");return}fetch("https://whats-upp-production.up.railway.app/api/whatsapp/accounts").then(a=>a.json()).then(a=>{const l=a.accounts?.find(x=>x.status==="connected");l&&(g(l),p("chat"))}).catch(a=>console.error("Error:",a))},[d,n]),d?t.jsxs("div",{className:"page-container",children:[t.jsx("div",{className:"page-header",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[t.jsxs("div",{children:[t.jsx("h1",{children:"ğŸ’¬ Chat Clienti - WhatsApp"}),t.jsx("p",{className:"page-subtitle",children:i==="chat"?"ConversaÈ›ii cu clienÈ›ii":"Gestionare conturi WhatsApp"})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>p("chat"),className:i==="chat"?"btn-primary":"btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"ğŸ’¬ Chat"}),t.jsx("button",{onClick:()=>p("accounts"),className:i==="accounts"?"btn-primary":"btn-secondary",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"âš™ï¸ Accounts"})]}),t.jsx("button",{onClick:()=>n("/home"),className:"btn-secondary",children:"â† Ãnapoi"})]})]})}),i==="accounts"?t.jsx(v,{}):t.jsx(k,{})]}):null}export{D as default};

import{d as r,j as e}from"./index-CLOkbANW.js";import{u as L,b as s}from"./react-vendor-BCFq-EBz.js";import{D as O,H as D,Q,t as T,u as V,N as R,O as $}from"./firebase-CZFSqwcK.js";function W(){const M=L(),[i,B]=s.useState([]),[N,b]=s.useState(!0),[P,l]=s.useState(!1),[n,C]=s.useState(null),[c,d]=s.useState(""),[o,u]=s.useState(""),[y,h]=s.useState(""),[S,m]=s.useState(""),[E,p]=s.useState(""),[x,j]=s.useState(""),[w,v]=s.useState("activ"),[A,g]=s.useState("");s.useEffect(()=>{f()},[]);const f=async()=>{b(!0);try{const t=(await O(D(r,"soferi"))).docs.map(z=>({id:z.id,...z.data()}));B(t)}catch(a){console.error("Error loading soferi:",a)}finally{b(!1)}},q=async a=>{if(a.preventDefault(),!c||!o){alert("CompleteazÄƒ numele È™i telefonul!");return}try{const t={nume:c,telefon:o,email:y,tipVehicul:S,numarInmatriculare:E,capacitate:x?parseInt(x):null,status:w,notite:A,updatedAt:V()};n?(await R(T(r,"soferi",n.id),t),alert("È˜ofer actualizat!")):(await $(D(r,"soferi"),{...t,createdAt:V()}),alert("È˜ofer adÄƒugat!")),l(!1),I(),f()}catch(t){console.error("Error saving sofer:",t),alert("Eroare la salvare!")}},F=a=>{C(a),d(a.nume),u(a.telefon),h(a.email||""),m(a.tipVehicul||""),p(a.numarInmatriculare||""),j(a.capacitate||""),v(a.status||"activ"),g(a.notite||""),l(!0)},G=async a=>{if(confirm("È˜tergi acest È™ofer?"))try{await Q(T(r,"soferi",a)),alert("È˜ofer È™ters!"),f()}catch(t){console.error("Error deleting:",t),alert("Eroare la È™tergere!")}},I=()=>{C(null),d(""),u(""),h(""),m(""),p(""),j(""),v("activ"),g("")},k=()=>{I(),l(!0)},H=a=>{switch(a){case"activ":return"badge-disponibil";case"inactiv":return"badge-indisponibil";case"concediu":return"badge-warning";default:return"badge-disponibil"}};return e.jsxs("div",{className:"page-container",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Management È˜oferi"}),e.jsx("p",{className:"page-subtitle",children:"GestioneazÄƒ È™oferii È™i vehiculele pentru transport"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>M("/home"),className:"btn-secondary",children:"â† Ãnapoi"}),e.jsx("button",{onClick:k,className:"btn-refresh",children:"+ AdaugÄƒ È˜ofer"})]})]})}),e.jsxs("div",{className:"soferi-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Total È˜oferi"}),e.jsx("p",{children:i.length})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Activi"}),e.jsx("p",{children:i.filter(a=>a.status==="activ").length})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Inactivi"}),e.jsx("p",{children:i.filter(a=>a.status==="inactiv").length})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:"Ãn Concediu"}),e.jsx("p",{children:i.filter(a=>a.status==="concediu").length})]})]}),N&&e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Se Ã®ncarcÄƒ È™oferii..."})]}),!N&&e.jsx("div",{className:"soferi-list",children:i.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("p",{children:"Nu existÄƒ È™oferi adÄƒugaÈ›i Ã®ncÄƒ."}),e.jsx("button",{onClick:k,className:"btn-refresh",children:"AdaugÄƒ Primul È˜ofer"})]}):i.map(a=>e.jsxs("div",{className:"sofer-card",children:[e.jsxs("div",{className:"sofer-header",children:[e.jsxs("div",{children:[e.jsx("h3",{children:a.nume}),e.jsxs("span",{className:`badge ${H(a.status)}`,children:[a.status==="activ"&&"âœ“ Activ",a.status==="inactiv"&&"âœ— Inactiv",a.status==="concediu"&&"ğŸ–ï¸ Concediu"]})]}),e.jsxs("div",{className:"sofer-actions",children:[e.jsx("button",{onClick:()=>F(a),className:"btn-edit",children:"âœï¸ EditeazÄƒ"}),e.jsx("button",{onClick:()=>G(a.id),className:"btn-delete-small",children:"ğŸ—‘ï¸"})]})]}),e.jsxs("div",{className:"sofer-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ğŸ“ Telefon:"})," ",a.telefon]}),a.email&&e.jsxs("p",{children:[e.jsx("strong",{children:"ğŸ“§ Email:"})," ",a.email]}),a.tipVehicul&&e.jsxs("p",{children:[e.jsx("strong",{children:"ğŸš— Vehicul:"})," ",a.tipVehicul]}),a.numarInmatriculare&&e.jsxs("p",{children:[e.jsx("strong",{children:"ğŸ”¢ Nr. Ãnmatriculare:"})," ",a.numarInmatriculare]}),a.capacitate&&e.jsxs("p",{children:[e.jsx("strong",{children:"ğŸ‘¥ Capacitate:"})," ",a.capacitate," persoane"]}),a.notite&&e.jsxs("p",{children:[e.jsx("strong",{children:"ğŸ“ NotiÈ›e:"})," ",a.notite]})]})]},a.id))}),P&&e.jsx("div",{className:"modal-overlay",onClick:()=>l(!1),children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:n?"EditeazÄƒ È˜ofer":"AdaugÄƒ È˜ofer"}),e.jsx("button",{onClick:()=>l(!1),className:"btn-close",children:"Ã—"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:q,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nume Complet *"}),e.jsx("input",{type:"text",value:c,onChange:a=>d(a.target.value),className:"filter-input",placeholder:"Ex: Ion Popescu",required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Telefon *"}),e.jsx("input",{type:"tel",value:o,onChange:a=>u(a.target.value),className:"filter-input",placeholder:"0712345678",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:y,onChange:a=>h(a.target.value),className:"filter-input",placeholder:"email@example.com"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Tip Vehicul"}),e.jsx("input",{type:"text",value:S,onChange:a=>m(a.target.value),className:"filter-input",placeholder:"Ex: Microbuz Mercedes"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nr. Ãnmatriculare"}),e.jsx("input",{type:"text",value:E,onChange:a=>p(a.target.value),className:"filter-input",placeholder:"B-123-ABC"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Capacitate (persoane)"}),e.jsx("input",{type:"number",value:x,onChange:a=>j(a.target.value),className:"filter-input",placeholder:"8",min:"1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:w,onChange:a=>v(a.target.value),className:"filter-input",children:[e.jsx("option",{value:"activ",children:"âœ“ Activ"}),e.jsx("option",{value:"inactiv",children:"âœ— Inactiv"}),e.jsx("option",{value:"concediu",children:"ğŸ–ï¸ Concediu"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"NotiÈ›e"}),e.jsx("textarea",{value:A,onChange:a=>g(a.target.value),className:"filter-input",rows:"3",placeholder:"InformaÈ›ii adiÈ›ionale..."})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"btn-secondary",children:"AnuleazÄƒ"}),e.jsx("button",{type:"submit",className:"btn-refresh",children:n?"ActualizeazÄƒ":"AdaugÄƒ"})]})]})})]})})]})}export{W as default};

import{a as $,d,j as e,c as bt,b as yt,s as jt}from"./index-go8NIyy-.js";import{u as St,b as a}from"./react-vendor-BCFq-EBz.js";import{J as Ct,G as z,H as f,K as ne,M as he,D as v,I as _,B as _e,t as R,x as zt,N as O,u as U,O as Ue,y as wt,z as kt,A as At}from"./firebase-CZFSqwcK.js";function It(){const h=St(),[l,se]=a.useState($.currentUser),[G,We]=a.useState(null),[Le,fe]=a.useState(!1),[xe,ve]=a.useState(!1),[K,be]=a.useState(!1),[w,ae]=a.useState(()=>localStorage.getItem("gmMode")==="true"),[b,j]=a.useState("dashboard"),[ye,Pe]=a.useState([]),[je,Se]=a.useState([]),[Ce,F]=a.useState(!1),[E,Oe]=a.useState(null),[ie,Ge]=a.useState([]),[W,ze]=a.useState(!1),[oe,Ke]=a.useState([]),[L,Fe]=a.useState(null),[we,He]=a.useState([]),[H,ce]=a.useState(!1),[Ye,Y]=a.useState(!1),[y,ke]=a.useState(null),[k,V]=a.useState(""),[le,q]=a.useState(""),[B,Ae]=a.useState(!1),[I,de]=a.useState({}),Ne=a.useRef(null),J=a.useRef(null),[T,A]=a.useState(()=>{const t=localStorage.getItem("chat_history");if(t)try{return JSON.parse(t)}catch{return[{role:"assistant",content:"BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?"}]}return[{role:"assistant",content:"BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?"}]}),[Q,me]=a.useState(""),[X,Re]=a.useState(!1),[Ee,Z]=a.useState(!1),[ee,Ve]=a.useState(localStorage.getItem("theme")||"dark"),[N,ue]=a.useState([]),Be=a.useRef(null);a.useEffect(()=>{localStorage.setItem("chat_history",JSON.stringify(T))},[T]),a.useEffect(()=>{document.body.className=ee==="light"?"light-theme":"",localStorage.setItem("theme",ee)},[ee]);const qe=()=>{Ve(t=>t==="dark"?"light":"dark")},[te,Je]=a.useState({evenimenteTotal:0,evenimenteNealocate:0,staffTotal:0,kycPending:0}),[Nt,Qe]=a.useState(!0);a.useEffect(()=>{localStorage.setItem("gmMode",w.toString())},[w]),a.useEffect(()=>{const t=Ne.current;if(!t)return;const r=s=>{const i=s.currentTarget,m=i.scrollTop,p=i.scrollHeight,g=i.clientHeight,o=s.deltaY,c=m===0,M=m+g>=p;(c&&o<0||M&&o>0)&&s.preventDefault(),s.stopPropagation()},n=t.querySelector(".sidebar-content");if(n)return n.addEventListener("wheel",r,{passive:!1}),()=>{n.removeEventListener("wheel",r)}},[]),a.useEffect(()=>{const t=Ct($,r=>{console.log("Auth state changed:",r?.email||"No user"),se(r)});return()=>t()},[]),a.useEffect(()=>{(async()=>{if(l){const r=await _e(R(d,"staffProfiles",l.uid));r.exists()&&We(r.data())}})(),at()},[l]),a.useEffect(()=>{w&&b==="gm-conversations"&&oe.length===0&&Ie()},[w,b]);const Ie=async()=>{ce(!0);try{if(!$.currentUser){console.log("âš ï¸ User not authenticated, skipping GM data load"),ce(!1);return}const t=z(f(d,"aiConversations"),ne("timestamp","desc"),he(1e3)),n=(await v(t)).docs.map(o=>({id:o.id,...o.data(),timestamp:o.data().timestamp?.toDate()})),s={};n.forEach(o=>{const c=o.userId;s[c]||(s[c]={userId:c,userName:o.userName||"Unknown",userEmail:o.userEmail||"unknown@email.com",conversations:[],lastConversation:o.timestamp}),s[c].conversations.push(o)});const i=Object.values(s).sort((o,c)=>c.lastConversation-o.lastConversation);console.log("ğŸ“Š GM Users loaded:",i.length,"users"),console.log("ğŸ’¬ Total conversations:",n.length);const m=z(f(d,"aiCorrections")),p=await v(m),g={};p.docs.forEach(o=>{const c=o.data();g[c.conversationId]={id:o.id,...c,correctedAt:c.correctedAt?.toDate()}}),console.log("âœï¸ Corrections loaded:",Object.keys(g).length),Ke(i),Se(n),de(g)}catch(t){console.error("âŒ Error loading GM users:",t),alert("Eroare la Ã®ncÄƒrcarea userilor: "+t.message)}finally{ce(!1)}},Xe=t=>{Fe(t),He(t.conversations)},Ze=t=>{ke(t);const r=I[t.id];r?(V(r.correctedResponse),q(r.correctionPrompt||"")):(V(t.aiResponse),q("")),Y(!0)},et=async()=>{if(!k.trim()){alert("Te rog sÄƒ scrii rÄƒspunsul corect!");return}Ae(!0);try{const t=I[y.id];if(t){const r=R(d,"aiCorrections",t.id),n={correctedResponse:k.trim(),correctionPrompt:le.trim(),correctedBy:l.uid,correctedByEmail:l.email,correctedAt:U(),applied:!1};await O(r,n),de(s=>({...s,[y.id]:{...t,...n,correctedAt:new Date}})),alert("âœ… CorecÈ›ie actualizatÄƒ cu succes!")}else{const r={conversationId:y.id,originalResponse:y.aiResponse,correctedResponse:k.trim(),correctionPrompt:le.trim(),correctedBy:l.uid,correctedByEmail:l.email,correctedAt:U(),applied:!1},n=await Ue(f(d,"aiCorrections"),r);de(s=>({...s,[y.id]:{id:n.id,...r,correctedAt:new Date}})),alert("âœ… CorecÈ›ie salvatÄƒ cu succes!")}Y(!1),ke(null),V(""),q("")}catch(t){console.error("Error saving correction:",t),alert("âŒ Eroare la salvarea corecÈ›iei: "+t.message)}finally{Ae(!1)}},pe=async()=>{F(!0);try{const t=z(f(d,"users"),_("status","==","pendingApproval")),n=(await v(t)).docs.map(s=>({id:s.id,...s.data()}));Pe(n)}catch(t){console.error("Error loading KYC submissions:",t)}finally{F(!1)}},tt=async()=>{F(!0);try{const t=z(f(d,"aiConversations"),ne("timestamp","desc"),he(50)),n=(await v(t)).docs.map(s=>({id:s.id,...s.data()}));Se(n)}catch(t){console.error("Error loading conversations:",t)}finally{F(!1)}},rt=async t=>{if(confirm("Aprobi aceastÄƒ cerere KYC?"))try{await O(R(d,"users",t),{status:"approved",kycStatus:"approved",approvedAt:U(),approvedBy:l.uid}),alert("âœ… KYC aprobat cu succes!"),pe()}catch(r){console.error("Error approving KYC:",r),alert("âŒ Eroare la aprobare: "+r.message)}},nt=async t=>{const r=prompt("Motiv respingere:");if(r)try{await O(R(d,"users",t),{status:"rejected",kycStatus:"rejected",rejectionReason:r,rejectedAt:U(),rejectedBy:l.uid}),alert("âœ… KYC respins!"),pe()}catch(n){console.error("Error rejecting KYC:",n),alert("âŒ Eroare la respingere: "+n.message)}},Te=async()=>{ze(!0);try{const t=z(f(d,"performanceMetrics"),ne("timestamp","desc"),he(1)),r=await v(t);r.empty||Oe(r.docs[0].data());const n=z(f(d,"performanceAlerts"),_("resolved","==",!1),ne("createdAt","desc")),i=(await v(n)).docs.map(m=>({id:m.id,...m.data()}));Ge(i)}catch(t){console.error("Error loading performance metrics:",t)}finally{ze(!1)}},st=async t=>{try{await O(R(d,"performanceAlerts",t),{resolved:!0,resolvedAt:U(),resolvedBy:l.uid}),Te()}catch(r){console.error("Error resolving alert:",r),alert("âŒ Eroare la rezolvare: "+r.message)}},at=async()=>{try{const t=l?.email==="ursache.andrei1995@gmail.com",n=(await v(f(d,"evenimente"))).docs.map(o=>({id:o.id,...o.data()})),s=n.filter(o=>(o.staffAlocat||[]).length===0),i=await v(z(f(d,"users"),_("status","==","approved"))),m=new Date().toISOString().split("T")[0],p=n.filter(o=>(o.data||o.dataStart)===m);let g=0;t&&(g=(await v(z(f(d,"users"),_("status","==","pendingApproval")))).size),Je({evenimenteTotal:n.length,evenimenteAstazi:p.length,evenimenteNealocate:s.length,staffTotal:i.size,kycPending:g})}catch(t){console.error("Error loading stats:",t)}finally{Qe(!1)}},it=async()=>{await zt($),h("/")};a.useEffect(()=>{J.current&&(J.current.scrollTop=J.current.scrollHeight)},[T]);const ot=async()=>{try{const t={user:{email:l?.email,nume:G?.nume||"Necunoscut",code:G?.code},stats:te,isAdmin:l?.email==="ursache.andrei1995@gmail.com"},r=z(f(d,"evenimente"),_("staffAlocat","array-contains",l.uid)),n=await v(r);return t.evenimenteUser=n.docs.map(s=>({nume:s.data().nume,data:s.data().data,locatie:s.data().locatie,rol:s.data().rol})),t}catch(t){return console.error("Error getting context:",t),null}},ct=async t=>{const r=t.toLowerCase();if(r==="gm"||r==="g m"||r.includes("modul gm"))return ae(!0),j("gm-conversations"),null;if(r.includes("alocÄƒ")||r.includes("aloca")){const n=r.match(/(\d{4}-\d{2}-\d{2})|(\d{1,2}\s+\w+)/g);if(!n||n.length<2)return'Te rog sÄƒ specifici intervalul de date. Exemplu: "AlocÄƒ evenimente din 2024-01-01 pÃ¢nÄƒ la 2024-01-31"';try{const i=(await v(f(d,"evenimente"))).docs.map(u=>({id:u.id,...u.data()})),m=i.filter(u=>!u.staffAlocat||u.staffAlocat.length===0);if(m.length===0)return"âœ… Nu existÄƒ evenimente nealocate!";const g=(await v(z(f(d,"users"),_("status","==","approved")))).docs.map(u=>({id:u.id,...u.data()})),c=(await v(f(d,"disponibilitati"))).docs.map(u=>({id:u.id,...u.data()}));let M=0;for(const u of m){const S=u.data||u.dataStart,P=u.nrStaffNecesar||1,De=g.filter(D=>{const ge=c.some(x=>x.userId!==D.uid||x.tipDisponibilitate==="indisponibil"?!1:S>=x.dataStart&&S<=x.dataEnd),re=i.some(x=>x.id===u.id||!x.staffAlocat||!x.staffAlocat.includes(D.uid)?!1:(x.data||x.dataStart)===S);return ge&&!re});De.sort((D,ge)=>{const re=c.some(C=>C.userId===D.uid&&C.tipDisponibilitate==="preferinta"&&S>=C.dataStart&&S<=C.dataEnd),x=c.some(C=>C.userId===ge.uid&&C.tipDisponibilitate==="preferinta"&&S>=C.dataStart&&S<=C.dataEnd);return re&&!x?-1:!re&&x?1:0});const $e=De.slice(0,P).map(D=>D.uid);$e.length>0&&(await O(R(d,"evenimente",u.id),{staffAlocat:$e,dataAlocare:new Date,alocatDe:"AI Chat"}),M++)}return`âœ… Alocare completÄƒ! Am alocat ${M} din ${m.length} evenimente. Vezi rezultatele Ã®n pagina Evenimente.`}catch(s){return console.error("Error in alocare:",s),"âŒ Eroare la alocare: "+s.message}}if(r.includes("evenimente")&&(r.includes("aratÄƒ")||r.includes("vezi")))return h("/evenimente"),"Te-am dus la Evenimente.";if(r.includes("disponibilitate"))return h("/disponibilitate"),"Te-am dus la Disponibilitate.";if(r.includes("salarizare")||r.includes("salarii"))return h("/salarizare"),"Te-am dus la Salarizare.";if(r.includes("È™oferi")||r.includes("soferi"))return h("/soferi"),"Te-am dus la Management È˜oferi.";if(r.includes("admin")){const n=$.currentUser;return n?(l||se(n),n.email?.trim().toLowerCase()==="ursache.andrei1995@gmail.com"?(be(!0),j("admin-kyc"),null):"â›” Acces interzis. Doar administratorul poate accesa Admin Panel."):"â³ Se Ã®ncarcÄƒ datele utilizatorului... ÃncearcÄƒ din nou Ã®n cÃ¢teva secunde."}if(r.includes("gm")){const n=$.currentUser;return n?(l||se(n),n.email?.trim().toLowerCase()==="ursache.andrei1995@gmail.com"?(ae(!0),j("gm-overview"),null):"â›” Acces interzis. Doar administratorul poate accesa GM Mode."):"â³ Se Ã®ncarcÄƒ datele utilizatorului... ÃncearcÄƒ din nou Ã®n cÃ¢teva secunde."}return r.includes("cÃ¢te evenimente")||r.includes("cate evenimente")?`Ai ${te.evenimenteTotal} evenimente Ã®n total, din care ${te.evenimenteAstazi} astÄƒzi.`:r.includes("cÃ¢È›i staff")||r.includes("cati staff")?`Sunt ${te.staffTotal} membri staff activi.`:r.includes("performanÈ›Äƒ")||r.includes("performanta")||r.includes("task")||r.includes("cum merg")?await lt():null},lt=async()=>{try{const t=new Date().toISOString().split("T")[0],r=await _e(R(d,"performanceMetrics",`${l.uid}_${t}`));if(!r.exists())return"Nu am date de performanÈ›Äƒ pentru astÄƒzi. Sistemul de monitorizare va genera raportul Ã®n curÃ¢nd.";const n=r.data(),s=n.overallScore>=90?"ğŸŸ¢":n.overallScore>=70?"ğŸŸ¡":n.overallScore>=50?"ğŸŸ ":"ğŸ”´",i=n.trend==="up"?"ğŸ“ˆ":n.trend==="down"?"ğŸ“‰":"â¡ï¸";return`${s} **Performance Score: ${n.overallScore}/100**

ğŸ“Š Detalii:
â€¢ Task-uri: ${n.tasksCompleted}/${n.tasksAssigned} (${n.completionRate}%)
â€¢ Calitate: ${n.qualityScore}/100
â€¢ Punctualitate: ${n.punctualityScore}/100
â€¢ Conformitate: ${n.complianceScore}/100

${i} Trend: ${n.trend} (${n.trendPercentage>0?"+":""}${n.trendPercentage}%)

${n.tasksOverdue>0?`âš ï¸ Ai ${n.tasksOverdue} task-uri Ã®n Ã®ntÃ¢rziere!`:"âœ… Toate task-urile la zi!"}`}catch(t){return console.error("Error fetching performance:",t),"Eroare la Ã®ncÄƒrcarea datelor de performanÈ›Äƒ."}},Me=async()=>{if(!Q.trim()&&N.length===0)return;const t=Q.trim(),r=N;if(me(""),ue([]),A(n=>[...n,{role:"user",content:t,images:r.map(s=>s.preview)}]),r.length===0){const n=await ct(t);if(n!=null){A(s=>[...s,{role:"assistant",content:n}]);return}else if(n===null)return}Re(!0);try{const n=await ot();if(r.length>0){const s=await pt(r),i=gt(r),m=ht(t),p=await bt({action:"validate_image",message:t,imageUrls:s,meta:i,documentType:m,userContext:n});if(p.data.success)ft(p.data);else throw new Error("Image validation failed")}else{const s=await yt({messages:[...T.slice(-10),{role:"user",content:t}],userContext:n});if(s.data.success)A(i=>[...i,{role:"assistant",content:s.data.message}]);else throw new Error("AI response failed")}}catch(n){console.error("Chat error:",n);let s="Eroare la comunicarea cu AI. ÃncearcÄƒ din nou.";n.code==="unauthenticated"?s="Trebuie sÄƒ fii autentificat pentru a folosi AI.":n.code==="resource-exhausted"?s="LimitÄƒ de utilizare atinsÄƒ. ÃncearcÄƒ din nou mai tÃ¢rziu.":n.code==="failed-precondition"?s="Serviciul AI nu este configurat corect. ContacteazÄƒ administratorul.":n.code==="unavailable"&&(s="Serviciul AI este temporar indisponibil. ÃncearcÄƒ din nou."),A(i=>[...i,{role:"assistant",content:s}])}finally{Re(!1)}},dt=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Browser-ul tÄƒu nu suportÄƒ recunoaÈ™tere vocalÄƒ. ÃncearcÄƒ Chrome.");return}const t=window.SpeechRecognition||window.webkitSpeechRecognition,r=new t;r.lang="ro-RO",r.continuous=!1,r.interimResults=!1,r.onstart=()=>{Z(!0)},r.onresult=n=>{const s=n.results[0][0].transcript;me(s),Z(!1)},r.onerror=n=>{console.error("Speech recognition error:",n.error),Z(!1),alert("Eroare la recunoaÈ™tere vocalÄƒ: "+n.error)},r.onend=()=>{Z(!1)},r.start()},mt=async t=>{const r=Array.from(t.target.files);for(const n of r){if(N.length>=3){alert("PoÈ›i Ã®ncÄƒrca maxim 3 imagini simultan");break}if(n.size>3*1024*1024){alert(`${n.name} este prea mare (max 3MB). ComprimÄƒ imaginea È™i Ã®ncearcÄƒ din nou.`);continue}if(!["image/jpeg","image/png","image/webp"].includes(n.type)){alert(`${n.name} nu este format valid. FoloseÈ™te JPG, PNG sau WEBP.`);continue}const s=URL.createObjectURL(n);ue(i=>[...i,{file:n,preview:s,size:n.size,name:n.name,type:n.type}])}t.target.value=""},ut=t=>{ue(r=>{const n=r.filter((s,i)=>i!==t);return URL.revokeObjectURL(r[t].preview),n})},pt=async t=>{const r=t.map(async(n,s)=>{const m=`${Date.now()}_${s}_${n.name}`,p=wt(jt,`ai-validations/${l.uid}/${m}`);return await kt(p,n.file),await At(p)});return await Promise.all(r)},gt=t=>{const r=t.map(s=>(s.size/1024/1024).toFixed(2)),n=t.some(s=>s.size>3*1024*1024);return`META has_image=true; image_count=${t.length}; image_size_mb=[${r.join(",")}]; user_says_over_3mb=${n}; user_priority=quality`},ht=t=>{const r=t.toLowerCase();return r.includes("ci")||r.includes("carte")||r.includes("identitate")?"CI":r.includes("permis")?"permis":r.includes("cazier")?"cazier":r.includes("eveniment")||r.includes("pozÄƒ")||r.includes("poza")?"eveniment":r.includes("raport")?"raport":r.includes("facturÄƒ")||r.includes("factura")||r.includes("bon")?"factura":"unknown"},ft=t=>{const{validation:r,message:n}=t,{overall_decision:s,per_image:i,need_user_action:m}=r;let p="",g="";switch(s){case"ACCEPT":p="âœ…",g="Document acceptat!";break;case"REJECT":p="âŒ",g="Document respins";break;case"REVIEW":p="âš ï¸",g="Document necesitÄƒ verificare";break;default:p="â“",g="Nu pot procesa documentul"}let o=`${p} **${g}**

${n}`;i&&i.length>0&&(o+=`

ğŸ“‹ Detalii per imagine:`,i.forEach((c,M)=>{const u=c.app_decision==="ACCEPT"?"âœ…":c.app_decision==="REJECT"?"âŒ":c.app_decision==="REVIEW"?"âš ï¸":"â“";if(o+=`
${M+1}. ${u} ${c.app_decision}`,c.detected_objects&&c.detected_objects.length>0){const S=c.detected_objects.filter(P=>P.label!=="UNKNOWN_RELEVANT").map(P=>P.label).join(", ");S&&(o+=`
   Detectat: ${S}`)}c.image_quality&&c.image_quality!=="unknown"&&(o+=`
   Calitate: ${c.image_quality}`)})),m&&m!=="none"&&(o+=`

ğŸ“Œ AcÈ›iune necesarÄƒ: ${xt(m)}`),A(c=>[...c,{role:"assistant",content:o,validationResult:r}])},xt=t=>({upload_image:"ÃncarcÄƒ imaginea",compress_to_3mb:"ComprimÄƒ imaginea sub 3MB",crop_zoom:"FÄƒ crop/zoom pe zona relevantÄƒ",better_photo:"FÄƒ o pozÄƒ mai bunÄƒ (luminÄƒ, focus, unghi perpendicular)",clarify_question:"ClarificÄƒ cererea",provide_app_rules:"SpecificÄƒ tipul documentului"})[t]||t,vt=async()=>{if(confirm("È˜tergi istoricul conversaÈ›iei? (Se va salva Ã®n sistem pentru admin)"))try{const t=T.filter(r=>r.role!=="assistant"||r.content!=="BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?");t.length>0&&await Ue(f(d,"aiConversations"),{userId:l.uid,userEmail:l.email,userName:G?.nume||l.displayName||"Unknown",conversationHistory:t,clearedAt:U(),messageCount:t.length,type:"cleared_by_user"}),A([{role:"assistant",content:"BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?"}]),localStorage.removeItem("chat_history")}catch(t){console.error("Error saving conversation:",t),A([{role:"assistant",content:"BunÄƒ! Sunt asistentul tÄƒu AI. Cu ce te pot ajuta?"}]),localStorage.removeItem("chat_history")}};return e.jsxs("div",{className:"home-clean",children:[e.jsx("div",{className:`sidebar-left ${Le?"open":""}`,ref:Ne,onMouseEnter:()=>fe(!0),onMouseLeave:()=>fe(!1),children:e.jsxs("div",{className:"sidebar-content",children:[e.jsx("div",{className:"sidebar-header",children:e.jsx("h3",{children:"Meniu"})}),e.jsxs("nav",{className:"sidebar-nav",children:[e.jsxs("button",{onClick:()=>{j("dashboard"),h("/home")},className:`nav-item ${b==="dashboard"?"active":""}`,children:[e.jsx("span",{className:"nav-icon",children:"ğŸ "}),e.jsx("span",{className:"nav-text",children:"AcasÄƒ"})]}),e.jsxs("button",{onClick:()=>h("/evenimente"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“…"}),e.jsx("span",{className:"nav-text",children:"Evenimente"})]}),e.jsxs("button",{onClick:()=>h("/disponibilitate"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ—“ï¸"}),e.jsx("span",{className:"nav-text",children:"Disponibilitate"})]}),e.jsxs("button",{onClick:()=>h("/salarizare"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ’°"}),e.jsx("span",{className:"nav-text",children:"Salarizare"})]}),e.jsxs("button",{onClick:()=>h("/soferi"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸš—"}),e.jsx("span",{className:"nav-text",children:"È˜oferi"})]}),e.jsx("div",{style:{borderTop:"1px solid #334155",margin:"0.5rem 0",opacity:.3}}),e.jsxs("button",{onClick:()=>h("/animator/chat-clienti"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ’¬"}),e.jsx("span",{className:"nav-text",children:"Chat ClienÈ›i"})]}),e.jsxs("button",{onClick:()=>h("/whatsapp/available"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“±"}),e.jsx("span",{className:"nav-text",children:"ClienÈ›i disponibili"})]}),K&&l?.email==="ursache.andrei1995@gmail.com"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{borderTop:"1px solid #334155",margin:"0.5rem 0",opacity:.3}}),e.jsxs("button",{onClick:()=>j("admin-kyc"),className:`nav-item nav-item-admin ${b==="admin-kyc"?"active":""}`,children:[e.jsx("span",{className:"nav-icon",children:"ğŸ‘¥"}),e.jsx("span",{className:"nav-text",children:"Admin KYC"})]}),e.jsxs("button",{onClick:()=>{be(!1),j("dashboard")},className:"nav-item nav-item-exit-admin",style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸšª"}),e.jsx("span",{className:"nav-text",children:"IeÈ™i din Admin"})]})]}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{borderTop:"1px solid #10b981",margin:"0.5rem 0",opacity:.5}}),e.jsxs("button",{onClick:()=>j("gm-conversations"),className:`nav-item ${b==="gm-conversations"?"active":""}`,style:{borderLeft:"3px solid #10b981"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸ’¬"}),e.jsx("span",{className:"nav-text",children:"ConversaÈ›ii AI"})]}),e.jsxs("button",{onClick:()=>h("/chat-clienti"),className:"nav-item",style:{borderLeft:"3px solid #10b981"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“±"}),e.jsx("span",{className:"nav-text",children:"Chat Clienti WhatsApp"})]}),e.jsxs("button",{onClick:()=>h("/accounts-management"),className:"nav-item",style:{borderLeft:"3px solid #10b981"},children:[e.jsx("span",{className:"nav-icon",children:"âš™ï¸"}),e.jsx("span",{className:"nav-text",children:"Conturi WhatsApp"})]}),e.jsxs("button",{onClick:()=>h("/centrala-telefonica"),className:"nav-item",style:{borderLeft:"3px solid #10b981"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“"}),e.jsx("span",{className:"nav-text",children:"Centrala TelefonicÄƒ"})]}),e.jsxs("button",{onClick:()=>j("gm-overview"),className:`nav-item ${b==="gm-overview"?"active":""}`,style:{borderLeft:"3px solid #10b981"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸ®"}),e.jsx("span",{className:"nav-text",children:"GM Overview"})]}),e.jsxs("button",{onClick:()=>j("gm-analytics"),className:`nav-item ${b==="gm-analytics"?"active":""}`,style:{borderLeft:"3px solid #10b981"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸ“Š"}),e.jsx("span",{className:"nav-text",children:"Analytics"})]}),e.jsxs("button",{onClick:()=>{ae(!1),j("dashboard")},className:"nav-item",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:[e.jsx("span",{className:"nav-icon",children:"ğŸšª"}),e.jsx("span",{className:"nav-text",children:"IeÈ™i din GM"})]})]}),l?.email==="ursache.andrei1995@gmail.com"&&e.jsxs("button",{onClick:()=>h("/settings"),className:"nav-item",children:[e.jsx("span",{className:"nav-icon",children:"âš™ï¸"}),e.jsx("span",{className:"nav-text",children:"SetÄƒri"})]})]})]})}),e.jsx("nav",{className:"navbar-clean",children:e.jsxs("div",{className:"nav-content",children:[e.jsx("h1",{children:"SuperParty"}),e.jsxs("div",{className:"nav-right",children:[K&&l?.email==="ursache.andrei1995@gmail.com"&&e.jsx("span",{style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",marginRight:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"ğŸ‘¨â€ğŸ’¼ Mod Admin"}),w&&l?.email==="ursache.andrei1995@gmail.com"&&e.jsx("span",{style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",marginRight:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"ğŸ® Mod GM"}),e.jsx("button",{className:"theme-toggle-nav",onClick:qe,title:"SchimbÄƒ tema",children:ee==="dark"?"â˜€ï¸":"ğŸŒ™"}),e.jsx("span",{className:"user-email",children:l?.email}),e.jsx("button",{className:"btn-signout",onClick:it,children:"Sign out"})]})]})}),e.jsx("div",{className:"home-content-clean",children:e.jsx("div",{className:"dashboard-container",children:b==="admin-kyc"&&K?e.jsxs("div",{children:[e.jsx("h2",{style:{marginBottom:"2rem",fontSize:"1.875rem",fontWeight:"700"},children:"ğŸ‘¥ Admin KYC - AprobÄƒri Pending"}),e.jsx("button",{onClick:pe,style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600",marginBottom:"1.5rem"},children:"ğŸ”„ ReÃ®mprospÄƒteazÄƒ"}),Ce?e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Se Ã®ncarcÄƒ cererile KYC..."})]}):ye.length===0?e.jsx("p",{style:{padding:"2rem",background:"#1e293b",borderRadius:"0.5rem",textAlign:"center"},children:"âœ… Nu existÄƒ cereri KYC pending"}):e.jsx("div",{style:{display:"grid",gap:"1rem"},children:ye.map(t=>e.jsxs("div",{style:{padding:"1.5rem",background:"#1e293b",borderRadius:"0.5rem",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem"},children:[t.firstName," ",t.lastName]}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ“§ ",t.email]}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ“± ",t.phone||"N/A"]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>rt(t.id),style:{padding:"0.5rem 1rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"600"},children:"âœ… AprobÄƒ"}),e.jsx("button",{onClick:()=>nt(t.id),style:{padding:"0.5rem 1rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"600"},children:"âŒ Respinge"})]})]}),t.ciUrl&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsx("p",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ“„ Documente:"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.ciUrl&&e.jsx("a",{href:t.ciUrl,target:"_blank",rel:"noopener noreferrer",style:{padding:"0.5rem 1rem",background:"#334155",borderRadius:"0.375rem",fontSize:"0.875rem",textDecoration:"none",color:"white"},children:"ğŸ†” CI"}),t.permisUrl&&e.jsx("a",{href:t.permisUrl,target:"_blank",rel:"noopener noreferrer",style:{padding:"0.5rem 1rem",background:"#334155",borderRadius:"0.375rem",fontSize:"0.875rem",textDecoration:"none",color:"white"},children:"ğŸš— Permis"}),t.cazierUrl&&e.jsx("a",{href:t.cazierUrl,target:"_blank",rel:"noopener noreferrer",style:{padding:"0.5rem 1rem",background:"#334155",borderRadius:"0.375rem",fontSize:"0.875rem",textDecoration:"none",color:"white"},children:"ğŸ“‹ Cazier"})]})]})]},t.id))})]}):b==="admin-conversations"&&K?e.jsxs("div",{children:[e.jsx("h2",{style:{marginBottom:"2rem",fontSize:"1.875rem",fontWeight:"700"},children:"ğŸ’¬ ConversaÈ›ii AI - Istoric"}),e.jsx("button",{onClick:tt,style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600",marginBottom:"1.5rem"},children:"ğŸ”„ ReÃ®mprospÄƒteazÄƒ"}),Ce?e.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Se Ã®ncarcÄƒ conversaÈ›iile..."})]}):je.length===0?e.jsx("p",{style:{padding:"2rem",background:"#1e293b",borderRadius:"0.5rem",textAlign:"center"},children:"ğŸ“­ Nu existÄƒ conversaÈ›ii salvate"}):e.jsx("div",{style:{display:"grid",gap:"1rem"},children:je.map(t=>e.jsxs("div",{style:{padding:"1.5rem",background:"#1e293b",borderRadius:"0.5rem",border:"1px solid #334155"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem"},children:t.userName||"Unknown User"}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ“§ ",t.userEmail]}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ•"," ",t.clearedAt?.toDate?.()?.toLocaleString("ro-RO")||t.timestamp?.toDate?.()?.toLocaleString("ro-RO")||"N/A"]}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},children:["ğŸ’¬ ",t.messageCount||t.conversationHistory?.length||0," mesaje"]})]}),t.conversationHistory&&t.conversationHistory.length>0&&e.jsxs("details",{style:{marginTop:"1rem"},children:[e.jsx("summary",{style:{cursor:"pointer",color:"#667eea",fontWeight:"600"},children:"Vezi conversaÈ›ia"}),e.jsx("div",{style:{marginTop:"1rem",maxHeight:"300px",overflowY:"auto",padding:"1rem",background:"#0f172a",borderRadius:"0.375rem"},children:t.conversationHistory.map((r,n)=>e.jsxs("div",{style:{marginBottom:"1rem",paddingBottom:"1rem",borderBottom:n<t.conversationHistory.length-1?"1px solid #334155":"none"},children:[e.jsx("p",{style:{fontWeight:"600",color:r.role==="user"?"#10b981":"#667eea",marginBottom:"0.5rem"},children:r.role==="user"?"ğŸ‘¤ User":"ğŸ¤– AI"}),e.jsx("p",{style:{fontSize:"0.875rem",whiteSpace:"pre-wrap"},children:r.content})]},n))})]})]},t.id))})]}):b==="gm-overview"&&w?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.875rem",fontWeight:"700"},children:"ğŸ® GM Overview - Control Panel"}),e.jsx("button",{onClick:Te,disabled:W,style:{padding:"0.75rem 1.5rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.5rem",cursor:W?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"600",opacity:W?.6:1},children:W?"â³ Se Ã®ncarcÄƒ...":"ğŸ”„ ReÃ®mprospÄƒteazÄƒ"})]}),W?e.jsx("div",{style:{textAlign:"center",padding:"3rem",fontSize:"1.2rem",color:"#64748b"},children:"â³ Se Ã®ncarcÄƒ datele..."}):e.jsxs(e.Fragment,{children:[E?e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:"ğŸ“Š Metrici de PerformanÈ›Äƒ"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ¯ AcurateÈ›e"}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#10b981"},children:[E.accuracy?.toFixed(1)||0,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"ÈšintÄƒ: â‰¥85%"})]}),e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"âš¡ Timp RÄƒspuns"}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#3b82f6"},children:[E.avgResponseTime?.toFixed(0)||0,"ms"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"ÈšintÄƒ: â‰¤3000ms"})]}),e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"âŒ RatÄƒ Erori"}),e.jsxs("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#ef4444"},children:[E.errorRate?.toFixed(1)||0,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"ÈšintÄƒ: â‰¤5%"})]}),e.jsxs("div",{style:{background:"#1e293b",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #334155"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ“ˆ Total ValidÄƒri"}),e.jsx("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#8b5cf6"},children:E.totalValidations||0}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"Ultimele 24h"})]})]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#64748b",textAlign:"right"},children:["Ultima actualizare:"," ",E.timestamp?.toDate?.()?.toLocaleString("ro-RO")||"N/A"]})]}):e.jsxs("div",{style:{padding:"2rem",background:"#1e293b",borderRadius:"0.75rem",border:"1px solid #334155",textAlign:"center",marginBottom:"2rem"},children:[e.jsx("p",{style:{fontSize:"1.1rem",color:"#94a3b8"},children:"ğŸ“Š Nu existÄƒ date de performanÈ›Äƒ disponibile"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",marginTop:"0.5rem"},children:'ApasÄƒ "ReÃ®mprospÄƒteazÄƒ" pentru a Ã®ncÄƒrca datele'})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:["ğŸš¨ Alerte Active (",ie.length,")"]}),ie.length===0?e.jsxs("div",{style:{padding:"2rem",background:"#1e293b",borderRadius:"0.75rem",border:"1px solid #334155",textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"1.1rem",color:"#10b981"},children:"âœ… Nu existÄƒ alerte active"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"#64748b",marginTop:"0.5rem"},children:"Toate sistemele funcÈ›ioneazÄƒ normal"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:ie.map(t=>e.jsx("div",{style:{padding:"1.5rem",background:"#1e293b",borderRadius:"0.75rem",border:`2px solid ${t.severity==="critical"?"#ef4444":t.severity==="warning"?"#f59e0b":"#3b82f6"}`,borderLeft:`6px solid ${t.severity==="critical"?"#ef4444":t.severity==="warning"?"#f59e0b":"#3b82f6"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:"600",padding:"0.25rem 0.75rem",borderRadius:"0.25rem",background:t.severity==="critical"?"#ef4444":t.severity==="warning"?"#f59e0b":"#3b82f6",color:"white"},children:t.severity?.toUpperCase()}),e.jsx("span",{style:{fontSize:"0.875rem",color:"#94a3b8"},children:t.type})]}),e.jsx("p",{style:{fontSize:"1rem",color:"#e2e8f0",marginBottom:"0.5rem"},children:t.message}),e.jsxs("p",{style:{fontSize:"0.75rem",color:"#64748b"},children:["ğŸ• ",t.createdAt?.toDate?.()?.toLocaleString("ro-RO")||"N/A"]})]}),e.jsx("button",{onClick:()=>st(t.id),style:{padding:"0.5rem 1rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",whiteSpace:"nowrap"},children:"âœ… RezolvÄƒ"})]})},t.id))})]})]})]}):b==="gm-conversations"&&w?e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 200px)",gap:"1rem"},children:[e.jsxs("div",{style:{width:"300px",background:"#1e293b",borderRadius:"0.75rem",padding:"1rem",overflowY:"auto",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"ğŸ‘¥ Useri"}),e.jsx("button",{onClick:Ie,disabled:H,style:{padding:"0.5rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:H?"not-allowed":"pointer",fontSize:"0.875rem"},children:H?"â³":"ğŸ”„"})]}),H?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b"},children:"â³ Se Ã®ncarcÄƒ..."}):oe.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b",fontSize:"0.875rem"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"ğŸ“­"}),e.jsx("div",{style:{marginBottom:"0.5rem"},children:"Niciun user gÄƒsit"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#475569"},children:"ConversaÈ›iile apar aici dupÄƒ ce userii vorbesc cu AI-ul"})]}):oe.map(t=>e.jsxs("div",{onClick:()=>Xe(t),style:{padding:"0.75rem",marginBottom:"0.5rem",background:L?.userId===t.userId?"#334155":"#0f172a",borderRadius:"0.5rem",cursor:"pointer",border:L?.userId===t.userId?"2px solid #10b981":"1px solid #1e293b",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:t.userName}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#94a3b8",marginBottom:"0.25rem"},children:t.userEmail}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:["ğŸ’¬ ",t.conversations.length," conversaÈ›ii"]})]},t.userId))]}),e.jsx("div",{style:{flex:1,background:"#1e293b",borderRadius:"0.75rem",padding:"1.5rem",overflowY:"auto",border:"1px solid #334155"},children:L?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid #334155"},children:[e.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"0.5rem"},children:["ğŸ’¬ ConversaÈ›ii: ",L.userName]}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"#94a3b8"},children:[L.userEmail," â€¢ ",we.length," conversaÈ›ii"]})]}),(()=>{const t={};return we.forEach(r=>{const n=r.timestamp?.toLocaleDateString("ro-RO",{day:"2-digit",month:"2-digit",year:"numeric"})||"Data necunoscutÄƒ";t[n]||(t[n]=[]),t[n].push(r)}),Object.entries(t).map(([r,n])=>e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem",color:"#10b981",display:"flex",alignItems:"center",gap:"0.5rem"},children:["ğŸ“… ",r]}),n.map(s=>{const i=I[s.id];return e.jsxs("div",{style:{background:"#0f172a",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem",border:i?"2px solid #10b981":"1px solid #1e293b",position:"relative"},children:[i&&e.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#10b981",color:"white",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"600"},children:"âœ“ Corectat"}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.5rem"},children:["ğŸ•"," ",s.timestamp?.toLocaleTimeString("ro-RO",{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{style:{marginBottom:"0.75rem"},children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.25rem"},children:"â“ User:"}),e.jsx("div",{style:{color:"#e2e8f0"},children:s.userMessage})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.25rem"},children:"ğŸ¤– AI:"}),e.jsx("div",{style:{color:"#cbd5e1"},children:s.aiResponse})]}),e.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>Ze(s),style:{padding:"0.5rem 1rem",background:i?"#0ea5e9":"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem"},children:i?"ğŸ‘ï¸ Vezi/EditeazÄƒ CorecÈ›ia":"âœï¸ CorecteazÄƒ"}),e.jsx("button",{style:{padding:"0.5rem 1rem",background:"#334155",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem"},children:"ğŸ‘ Bun"}),e.jsx("button",{style:{padding:"0.5rem 1rem",background:"#334155",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem"},children:"ğŸ‘ Prost"})]})]},s.id)})]},r))})()]}):e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#64748b"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ğŸ‘ˆ"}),e.jsx("div",{style:{fontSize:"1.2rem"},children:"SelecteazÄƒ un user din stÃ¢nga"})]})})]}):b==="gm-analytics"&&w?e.jsxs("div",{children:[e.jsx("h2",{style:{marginBottom:"2rem",fontSize:"1.875rem",fontWeight:"700"},children:"ğŸ“Š GM Analytics - Statistici Avansate"}),e.jsx("p",{style:{fontSize:"1.2rem",color:"#10b981"},children:"Analize detaliate È™i rapoarte pentru Game Master."}),e.jsx("p",{style:{marginTop:"1rem",padding:"1rem",background:"#1e293b",borderRadius:"0.5rem",borderLeft:"4px solid #10b981"},children:"ğŸš§ ConÈ›inut GM Analytics Ã®n curs de integrare..."})]}):e.jsx(e.Fragment,{children:e.jsxs("h2",{style:{marginBottom:"2rem",fontSize:"1.875rem",fontWeight:"700"},children:["Bine ai venit, ",G?.nume||l?.email,"!"]})})})}),e.jsxs("div",{className:"ai-chat-container",children:[xe&&e.jsxs("div",{className:"chat-window",children:[e.jsxs("div",{className:"chat-header",children:[e.jsx("h4",{children:"ğŸ¤– Asistent AI"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{className:"chat-clear-btn",onClick:vt,title:"È˜terge istoric",children:"ğŸ—‘ï¸"}),e.jsx("button",{className:"chat-close",onClick:()=>ve(!1),children:"âœ•"})]})]}),e.jsxs("div",{className:"chat-messages",ref:J,children:[T.map((t,r)=>e.jsx("div",{className:`chat-message ${t.role==="user"?"user":"bot"}`,children:t.content},r)),X&&e.jsx("div",{className:"chat-message bot",children:e.jsxs("div",{className:"typing-indicator",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})})]}),N.length>0&&e.jsx("div",{className:"chat-image-preview",children:N.map((t,r)=>e.jsxs("div",{className:"preview-item",children:[e.jsx("img",{src:t.preview,alt:`Preview ${r+1}`}),e.jsxs("span",{className:"image-size",children:[(t.size/1024/1024).toFixed(2)," MB"]}),e.jsx("button",{className:"remove-image",onClick:()=>ut(r),children:"âœ•"})]},r))}),e.jsxs("div",{className:"chat-input-container",children:[e.jsx("input",{type:"file",ref:Be,accept:"image/jpeg,image/png,image/webp",multiple:!0,onChange:mt,style:{display:"none"}}),e.jsx("button",{className:"chat-image-btn",onClick:()=>Be.current?.click(),disabled:X||N.length>=3,title:"ÃncarcÄƒ imagine (max 3MB)",children:"ğŸ“·"}),e.jsx("button",{className:"chat-voice-btn",onClick:dt,disabled:Ee,title:"ComandÄƒ vocalÄƒ",children:Ee?"ğŸ”´":"ğŸ¤"}),e.jsx("input",{type:"text",placeholder:"Scrie un mesaj sau foloseÈ™te vocea...",className:"chat-input",value:Q,onChange:t=>me(t.target.value),onKeyPress:t=>t.key==="Enter"&&Me(),disabled:X}),e.jsx("button",{className:"chat-send",onClick:Me,disabled:X||!Q.trim()&&N.length===0,children:"â¤"})]})]}),e.jsx("button",{className:"ai-chat-button",onClick:()=>ve(!xe),children:"ğŸ¤–"}),Ye&&y&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem"},children:e.jsxs("div",{style:{background:"#1e293b",borderRadius:"1rem",padding:"2rem",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",border:"1px solid #334155"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"700"},children:I[y.id]?"ğŸ‘ï¸ Vezi/EditeazÄƒ CorecÈ›ia":"âœï¸ CorecteazÄƒ RÄƒspuns AI"}),I[y.id]&&e.jsxs("div",{style:{fontSize:"0.75rem",color:"#10b981",marginTop:"0.25rem"},children:["âœ“ Corectat la"," ",I[y.id].correctedAt?.toLocaleString("ro-RO")]})]}),e.jsx("button",{onClick:()=>Y(!1),style:{background:"transparent",border:"none",color:"#94a3b8",fontSize:"1.5rem",cursor:"pointer",padding:"0.5rem"},children:"âœ•"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"â“ Ãntrebarea User-ului:"}),e.jsx("div",{style:{background:"#0f172a",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #1e293b",color:"#e2e8f0"},children:y.userMessage})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ¤– RÄƒspunsul AI (Original):"}),e.jsx("div",{style:{background:"#0f172a",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #1e293b",color:"#cbd5e1"},children:y.aiResponse})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"âœ… RÄƒspunsul Corect (Tu scrii):"}),e.jsx("textarea",{value:k,onChange:t=>V(t.target.value),placeholder:"Scrie rÄƒspunsul corect aici...",style:{width:"100%",minHeight:"120px",background:"#0f172a",border:"1px solid #334155",borderRadius:"0.5rem",padding:"1rem",color:"#e2e8f0",fontSize:"1rem",fontFamily:"inherit",resize:"vertical"}})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",color:"#94a3b8",marginBottom:"0.5rem"},children:"ğŸ“ Prompt pentru AI (OpÈ›ional - pentru Ã®nvÄƒÈ›are):"}),e.jsx("textarea",{value:le,onChange:t=>q(t.target.value),placeholder:"Ex: CÃ¢nd user Ã®ntreabÄƒ despre weekend, explicÄƒ-i cum sÄƒ seteze disponibilitatea Ã®n app...",style:{width:"100%",minHeight:"80px",background:"#0f172a",border:"1px solid #334155",borderRadius:"0.5rem",padding:"1rem",color:"#e2e8f0",fontSize:"0.875rem",fontFamily:"inherit",resize:"vertical"}}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",marginTop:"0.5rem"},children:"ğŸ’¡ Acest prompt va fi salvat Ã®n Firebase È™i AI va Ã®nvÄƒÈ›a din el"})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>Y(!1),disabled:B,style:{padding:"0.75rem 1.5rem",background:"#334155",color:"white",border:"none",borderRadius:"0.5rem",cursor:B?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:"âŒ AnuleazÄƒ"}),e.jsx("button",{onClick:et,disabled:B||!k.trim(),style:{padding:"0.75rem 1.5rem",background:B||!k.trim()?"#64748b":"#10b981",color:"white",border:"none",borderRadius:"0.5rem",cursor:B||!k.trim()?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500"},children:B?"â³ Se salveazÄƒ...":"ğŸ’¾ SalveazÄƒ CorecÈ›ie"})]})]})})]})]})}export{It as default};
